import{r as f,u as W,o as X,c as l,d as a,e as o,t as n,h as d,O as x,l as _,g as i,k as P,w as Y,P as ee,m as u,j as m,K as R,J as k,F as w,x as $,f as te,H as se,b as oe}from"./app.15778.js";import{u as ne}from"./postServices.15778.js";import{u as le}from"./continentServices.15778.js";import{u as ae}from"./zoneServices.15778.js";import{u as ie}from"./countryServices.15778.js";import{u as re}from"./ministryServices.15778.js";import{_ as de}from"./RichText.15778.js";const ue={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},ce={class:"w-full space-y-4 py-5 text-center"},pe={class:"text-4xl font-bold capitalize text-primary-blue"},me={class:"text-md text-gray-700"},ye={key:0},ge={key:1},fe={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},_e={class:"font-semibold"},be={class:"mt-3 flex space-x-3 text-xs lg:mt-0 lg:text-sm"},he={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},ve={class:"text-xl font-semibold"},xe={class:"text-md font-light text-gray-700"},ke={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},we={class:"col-span-2"},$e={class:"text-gray-700"},Ce=o("span",{class:"text-red-500"},"*",-1),Ve={class:"text-xs font-light text-gray-400"},qe={class:"col-span-2 lg:col-span-1"},Ue={class:"text-gray-700",for:"es"},ze=o("span",{class:"text-red-500"},"*",-1),Se=["value"],Le={key:0},Me={key:1},Pe={key:2},Re={key:3},je={class:"col-span-2 lg:col-span-1"},Fe={class:"text-gray-700",for:"pt"},Ne=o("span",{class:"text-red-500"},"*",-1),Oe=["value"],Be={key:0},De={key:1},Ee={key:2},Ie={key:3},Te={key:1,value:"null"},Ze={class:"col-span-2"},Je={class:"text-gray-700",for:"es"},He=o("span",{class:"text-red-500"},"*",-1),Ke=["value"],Ae={key:0},Ge={key:1},Qe={key:2},We={key:3},Xe={key:1,value:"null"},Ye={class:"col-span-2"},et={class:"text-gray-700",for:"pt"},tt=o("span",{class:"text-red-500"},"*",-1),st=["value"],ot={key:0},nt={key:1},lt={key:2},at={key:3},it={key:0,class:"col-span-2"},rt={class:"text-gray-700",for:"fr"},dt=o("span",{class:"text-red-500"},"*",-1),ut={class:"flex items-center space-x-4 py-4"},ct=["src","alt"],pt={class:"col-span-2"},mt={class:"text-gray-700",for:"pt"},yt=o("span",{class:"text-red-500"},"*",-1),gt={key:1},ft={key:1,class:"text-xs font-light text-gray-400"},_t={class:"mt-20"},bt={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},ht={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},qt={__name:"EditPost",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(c){const y=c,C=se(),V=f(null);let{locale:q}=W();const j=["article","propau"],p=localStorage.user?JSON.parse(localStorage.user):"",{updatePost:F,getPost:N,post:s,errors:U,loading:z}=ne(),{continents:O,getContinents:B}=le(),{zones:S,getZones:D}=ae(),{countries:L,getCountries:E}=ie(),{ministries:I,getMinistries:T}=re(),b=f([]),h=f([]),g=f([]),M=f(0),Z=()=>{h.value=S.value.filter(e=>e.continent_id==s.value.continent_id),s.value.country_id="",s.value.zone_id="",g.value=[]},J=()=>{g.value=L.value.filter(e=>e.zone_id==s.value.zone_id),s.value.country_id=""};X(async()=>{await N(y.id),M.value++,j.includes(y.type)||C.push({name:"home"});for(const e of s.value.ministries)b.value.push(e.id);q.value=s.value.language,await B(),await D(),await E(),await T(),h.value=S.value.filter(e=>e.continent_id==s.value.continent_id),g.value=L.value.filter(e=>e.zone_id==s.value.zone_id)});const H=async()=>{let e=new FormData;e.append("image",s.value.image),e.append("title",s.value.title),e.append("type",s.value.type),e.append("user_id",s.value.user_id),e.append("language",s.value.language),e.append("content",s.value.content),e.append("continent_id",s.value.continent_id),e.append("zone_id",s.value.zone_id),e.append("country_id",s.value.country_id),e.append("ministries",b.value),e.append("_method","PUT"),await F(e,y.id),U.value==""&&(y.type=="article"?C.push({name:"compte",params:{name:p.firstname,slug:p.slug,id:p.id},query:{redirect:"article"}}):C.push({name:"compte",params:{name:p.firstname,slug:p.slug,id:p.id},query:{redirect:"propau"}}))},K=async()=>{console.log(V.value.files[0]),s.value.image=V.value.files[0]},v=e=>{s.value.language=e,q.value=e,localStorage.lang=q.value};function A(e){return URL.createObjectURL(e)}function G(e){return URL.revokeObjectURL(e)}return(e,r)=>{const Q=oe("Spin");return l(),a("div",ue,[o("div",ce,[o("h1",pe,n(e.$t("edit"))+" "+n(c.type),1),o("h2",me,[d(n(e.$t("your"))+" "+n(c.type)+" ",1),y.type=="article"?(l(),a("span",ye,n(e.$t("add-desc-1")),1)):(l(),a("span",ge,n(e.$tc("add-desc-1",2)),1))]),o("div",fe,[o("h1",_e,n(e.$t("select-lang"))+" :",1),o("div",be,[o("button",{class:x([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[0]||(r[0]=_(t=>v("fr"),["prevent"]))},n(e.$t("fr")),3),o("button",{class:x([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[1]||(r[1]=_(t=>v("en"),["prevent"]))},n(e.$t("en")),3),o("button",{class:x([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[2]||(r[2]=_(t=>v("es"),["prevent"]))},n(e.$t("es")),3),o("button",{class:x([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[3]||(r[3]=_(t=>v("pt"),["prevent"]))},n(e.$t("pt")),3)])])]),o("section",he,[i(U)!=""?(l(),P(ee,{key:0},{default:Y(()=>[d(n(i(U)),1)]),_:1})):u("",!0),o("h1",ve,n(e.$t("edit"))+" "+n(c.type),1),o("h2",xe,n(e.$t("good-msg-post"))+" ! ",1),o("form",{onSubmit:r[13]||(r[13]=_(t=>H(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[o("div",ke,[o("div",we,[o("label",$e,[d(n(e.$t("title"))+" ",1),Ce]),m(o("input",{required:"","onUpdate:modelValue":r[4]||(r[4]=t=>i(s).title=t),maxlength:"50",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[R,i(s).title]]),o("span",Ve,n(i(s).title?i(s).title.length:0)+" of 50 Characters",1)]),o("div",qe,[o("label",Ue,[d(n(e.$t("continent"))+" ",1),ze]),m(o("select",{required:"","onUpdate:modelValue":r[5]||(r[5]=t=>i(s).continent_id=t),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(l(!0),a(w,null,$(i(O),t=>(l(),a("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(l(),a("span",Le,n(t.name_en),1)):e.$i18n.locale=="fr"?(l(),a("span",Me,n(t.name_fr),1)):e.$i18n.locale=="es"?(l(),a("span",Pe,n(t.name_es),1)):(l(),a("span",Re,n(t.name_pt),1))],8,Se))),128))],544),[[k,i(s).continent_id]])]),o("div",je,[o("label",Fe,[d(n(e.$t("zoned"))+" ",1),Ne]),m(o("select",{required:"","onUpdate:modelValue":r[6]||(r[6]=t=>i(s).zone_id=t),onChange:J,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[h.value.length!=0?(l(!0),a(w,{key:0},$(h.value,t=>(l(),a("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(l(),a("span",Be,n(t.name_en),1)):e.$i18n.locale=="fr"?(l(),a("span",De,n(t.name_fr),1)):e.$i18n.locale=="es"?(l(),a("span",Ee,n(t.name_es),1)):(l(),a("span",Ie,n(t.name_pt),1))],8,Oe))),128)):(l(),a("option",Te," Requires "+n(e.$t("continent")),1))],544),[[k,i(s).zone_id]])]),o("div",Ze,[o("label",Je,[d(n(e.$t("country"))+" ",1),He]),m(o("select",{required:"","onUpdate:modelValue":r[7]||(r[7]=t=>i(s).country_id=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[g.value.length!=0?(l(!0),a(w,{key:0},$(g.value,t=>(l(),a("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(l(),a("span",Ae,n(t.name_en),1)):e.$i18n.locale=="fr"?(l(),a("span",Ge,n(t.name_fr),1)):e.$i18n.locale=="es"?(l(),a("span",Qe,n(t.name_es),1)):(l(),a("span",We,n(t.name_pt),1))],8,Ke))),128)):(l(),a("option",Xe," Requires "+n(e.$t("zoned")),1))],512),[[k,i(s).country_id]])]),o("div",Ye,[o("label",et,[d(n(e.$t("ministry"))+" ",1),tt]),m(o("select",{required:"",multiple:"","onUpdate:modelValue":r[8]||(r[8]=t=>b.value=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(l(!0),a(w,null,$(i(I),t=>(l(),a("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(l(),a("span",ot,n(t.name_en),1)):e.$i18n.locale=="fr"?(l(),a("span",nt,n(t.name_fr),1)):e.$i18n.locale=="es"?(l(),a("span",lt,n(t.name_es),1)):(l(),a("span",at,n(t.name_pt),1))],8,st))),128))],512),[[k,b.value]])]),c.type=="article"?(l(),a("div",it,[o("label",rt,[d(n(e.$t("thumbnails"))+" ",1),dt]),o("div",ut,[i(s).image?(l(),a("img",{key:0,src:typeof i(s).image=="string"?"/storage"+i(s).image:A(i(s).image),onLoad:r[9]||(r[9]=t=>typeof i(s).image=="string"?"":G(i(s).image)),class:"h-16 w-16 rounded-full",alt:i(s).title},null,40,ct)):u("",!0),o("input",{ref_key:"file",ref:V,onChange:r[10]||(r[10]=t=>K()),type:"file",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):u("",!0),o("div",pt,[o("label",mt,[d(n(e.$t("content"))+" ",1),yt]),c.type=="article"?(l(),P(de,{key:M.value,modelValue:i(s).content,"onUpdate:modelValue":r[11]||(r[11]=t=>i(s).content=t)},null,8,["modelValue"])):(l(),a("div",gt,[i(s).content?m((l(),a("textarea",{key:0,required:"","onUpdate:modelValue":r[12]||(r[12]=t=>i(s).content=t),maxlength:"2000",class:"mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512)),[[R,i(s).content]]):u("",!0),i(s).content?(l(),a("span",ft,n(i(s).content.length)+" of 2000 Characters",1)):u("",!0)]))])]),o("div",_t,[i(z)==0?(l(),a("button",bt,n(e.$t("save")),1)):u("",!0),i(z)==1?(l(),a("button",ht,[te(Q,{size:"small"})])):u("",!0)])],32)])])}}};export{qt as default};
