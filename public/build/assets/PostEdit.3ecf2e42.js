import{r as c,o as H,c as n,d as s,e as t,t as i,g as a,k as I,w as P,h as J,P as K,m as u,l as O,j as d,K as S,J as f,F as v,x as _,f as U,T as G,H as Q,b as W}from"./app.3c71ebbd.js";import{u as X}from"./postServices.5788633a.js";import{u as Y}from"./continentServices.e9c543f8.js";import{u as ee}from"./zoneServices.7feab0d1.js";import{u as te}from"./countryServices.51b2dc1b.js";import{u as oe}from"./ministryServices.d8326c5b.js";const re={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},ae={class:"z-0 w-full p-4"},ne={class:"flex w-full justify-between bg-white px-8 py-5"},se={class:"text-4xl font-bold capitalize text-primary-blue"},le={class:"mx-auto w-full bg-white p-6"},ie={class:"text-md font-light text-gray-700"},ue={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},de={class:"col-span-2"},ce=t("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),pe={class:"col-span-2"},ye=t("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),ge=t("option",{value:"fr"},"French",-1),fe=t("option",{value:"en"},"English",-1),me=t("option",{value:"es"},"Espanol",-1),be=t("option",{value:"pt"},"Portugues",-1),ve=[ge,fe,me,be],_e=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),xe=["value"],he=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),ke=["value"],we={key:1,value:"null"},Ce=t("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),qe=["value"],ze={key:1,value:"null"},Ve=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Pe=["value"],Se={key:0,class:"col-span-2"},Ue=t("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),Ee={class:"col-span-2"},Fe=t("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),Me={key:1},Te={key:1,class:"text-xs font-light text-gray-400"},je={class:"mt-6 flex flex-col items-end justify-end"},Be={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},De={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},Ne={key:0,class:"text-xs font-light italic"},Ie={__name:"PostEdit",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(p){const y=p,w=Q(),C=c(null),{updatePost:E,getPost:F,post:e,errors:x,loading:q}=X(),{continents:M,getContinents:T}=Y(),{zones:z,getZones:j}=ee(),{countries:V,getCountries:B}=te(),{ministries:D,getMinistries:N}=oe(),m=c([]),g=c([]),Z=()=>{m.value=z.value.filter(r=>r.continent_id==e.value.continent_id),e.value.country_id="",e.value.zone_id="",g.value=[]},$=()=>{g.value=V.value.filter(r=>r.zone_id==e.value.zone_id),e.value.country_id=""},b=c(""),h=c(""),k=c(0);H(async()=>{await F(y.id),y.type=="article"&&(b.value.value=e.value.content,sceditor.create(b.value,{format:"bbcode",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"})),k.value++,await T(),await j(),await B(),await N(),m.value=z.value.filter(r=>r.continent_id==e.value.continent_id),g.value=V.value.filter(r=>r.zone_id==e.value.zone_id)});const R=async()=>{if(y.type=="article"&&(e.value.content=b.value.value,k.value==1)){k.value++,h.value="please click again";return}let r=new FormData;r.append("image",e.value.image),r.append("title",e.value.title),r.append("type",e.value.type),r.append("user_id",e.value.user_id),r.append("language",e.value.language),r.append("content",e.value.content),r.append("continent_id",e.value.continent_id),r.append("zone_id",e.value.zone_id),r.append("country_id",e.value.country_id),r.append("ministry_id",e.value.ministry_id),r.append("_method","PUT"),await E(r,y.id),x.value==""&&(y.type=="article"?w.push({name:"admin.post.index",params:{type:"article"}}):w.push({name:"admin.post.index",params:{type:"propau"}}))},L=()=>{e.value.image=C.value.files[0]};return(r,l)=>{const A=W("Spin");return n(),s("div",re,[t("div",ae,[t("div",ne,[t("h1",se," Edit "+i(p.type),1)]),t("section",le,[a(x)!=""?(n(),I(K,{key:0},{default:P(()=>[J(i(a(x)),1)]),_:1})):u("",!0),t("h2",ie," Add a new "+i(p.type),1),t("form",{onSubmit:l[8]||(l[8]=O(o=>R(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",ue,[t("div",de,[ce,d(t("input",{required:"","onUpdate:modelValue":l[0]||(l[0]=o=>a(e).title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[S,a(e).title]])]),t("div",pe,[ye,d(t("select",{required:"","onUpdate:modelValue":l[1]||(l[1]=o=>a(e).language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},ve,512),[[f,a(e).language]])]),t("div",null,[_e,d(t("select",{required:"","onUpdate:modelValue":l[2]||(l[2]=o=>a(e).continent_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),s(v,null,_(a(M),o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,xe))),128))],544),[[f,a(e).continent_id]])]),t("div",null,[he,d(t("select",{required:"","onUpdate:modelValue":l[3]||(l[3]=o=>a(e).zone_id=o),onChange:$,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[m.value.length!=0?(n(!0),s(v,{key:0},_(m.value,o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,ke))),128)):(n(),s("option",we," Requires "+i(r.$t("continent")),1))],544),[[f,a(e).zone_id]])]),t("div",null,[Ce,d(t("select",{required:"","onUpdate:modelValue":l[4]||(l[4]=o=>a(e).country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[g.value.length!=0?(n(!0),s(v,{key:0},_(g.value,o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,qe))),128)):(n(),s("option",ze," Requires "+i(r.$t("zoned")),1))],512),[[f,a(e).country_id]])]),t("div",null,[Ve,d(t("select",{required:"","onUpdate:modelValue":l[5]||(l[5]=o=>a(e).ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),s(v,null,_(a(D),o=>(n(),s("option",{key:o.id,value:o.id},i(o.name_en),9,Pe))),128))],512),[[f,a(e).ministry_id]])]),p.type=="article"?(n(),s("div",Se,[Ue,t("input",{ref_key:"file",ref:C,onChange:l[6]||(l[6]=o=>L()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):u("",!0),t("div",Ee,[Fe,p.type=="article"?(n(),s("textarea",{key:0,required:"",ref_key:"textarea",ref:b,class:"h-96 w-full"},`\r
                            `,512)):(n(),s("div",Me,[a(e).content?d((n(),s("textarea",{key:0,required:"","onUpdate:modelValue":l[7]||(l[7]=o=>a(e).content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                                `,512)),[[S,a(e).content]]):u("",!0),a(e).content?(n(),s("span",Te,i(a(e).content.length)+" of 2000 Characters",1)):u("",!0)]))])]),t("div",je,[a(q)==0?(n(),s("button",Be," Save ")):u("",!0),a(q)==1?(n(),s("button",De,[U(A,{size:"small"})])):u("",!0),U(G,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:P(()=>[h.value!=""?(n(),s("span",Ne,i(h.value),1)):u("",!0)]),_:1})])],32)])])])}}};export{Ie as default};
