import{r as m,u as W,o as X,c as a,d as l,e as t,t as n,O as x,l as f,g as r,k as Y,w as P,h as d,P as ee,m as u,j as y,K as F,J as k,F as w,x as $,f as te,T as se,I as oe}from"./app.a6e0b7af.js";import{u as ne}from"./postServices.ec0b2ea2.js";import{u as ae}from"./continentServices.7d39236e.js";import{u as le}from"./zoneServices.558e62e1.js";import{u as re}from"./countryServices.205b0384.js";import{u as ie}from"./ministryServices.c3bacdfa.js";const de={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},ue={class:"w-full space-y-4 py-5 text-center"},ce={class:"text-4xl font-bold capitalize text-primary-blue"},pe={class:"text-md text-gray-700"},me={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},ye={class:"font-semibold"},ge={class:"mt-3 flex space-x-3 text-xs lg:mt-0 lg:text-sm"},fe={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},_e={class:"text-xl font-semibold"},be={class:"text-md font-light text-gray-700"},he={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},ve={class:"col-span-2"},xe={class:"dark:text-gray-200 text-gray-700"},ke=t("span",{class:"text-red-500"},"*",-1),we={class:"text-xs font-light text-gray-400"},$e={class:"col-span-2 lg:col-span-1"},Ce={class:"dark:text-gray-200 text-gray-700",for:"es"},ze=t("span",{class:"text-red-500"},"*",-1),Se=["value"],Ue={key:0},Ve={key:1},qe={key:2},je={key:3},Le={class:"col-span-2 lg:col-span-1"},Me={class:"dark:text-gray-200 text-gray-700",for:"pt"},Pe=t("span",{class:"text-red-500"},"*",-1),Fe=["value"],Be={key:0},Ne={key:1},Oe={key:2},Re={key:3},Te={key:1,value:"null"},De={class:"col-span-2 lg:col-span-1"},Ee={class:"dark:text-gray-200 text-gray-700",for:"es"},Ie=t("span",{class:"text-red-500"},"*",-1),Ze=["value"],Je={key:0},Ae={key:1},He={key:2},Ke={key:3},Ge={key:1,value:"null"},Qe={class:"col-span-2 lg:col-span-1"},We={class:"dark:text-gray-200 text-gray-700",for:"pt"},Xe=t("span",{class:"text-red-500"},"*",-1),Ye=["value"],et={key:0},tt={key:1},st={key:2},ot={key:3},nt={key:0,class:"col-span-2"},at={class:"dark:text-gray-200 text-gray-700",for:"fr"},lt=t("span",{class:"text-red-500"},"*",-1),rt={class:"flex items-center space-x-4 py-4"},it=["src","alt"],dt={class:"col-span-2"},ut={class:"dark:text-gray-200 text-gray-700",for:"pt"},ct=t("span",{class:"text-red-500"},"*",-1),pt={key:1},mt={key:1,class:"text-xs font-light text-gray-400"},yt={class:"mt-20"},gt={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},ft={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},_t=t("svg",{class:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),bt=[_t],ht={key:0,class:"text-xs font-light italic"},zt={__name:"EditPost",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(c){const p=c,C=oe(),z=m(null),{locale:q}=W(),B=["article","propau"],_=localStorage.user?JSON.parse(localStorage.user):"",{updatePost:N,getPost:O,post:o,errors:S,loading:j}=ne(),{continents:R,getContinents:T}=ae(),{zones:L,getZones:D}=le(),{countries:M,getCountries:E}=re(),{ministries:I,getMinistries:Z}=ie(),b=m(""),U=m(0),V=m(""),h=m([]),g=m([]),J=()=>{h.value=L.value.filter(e=>e.continent_id==o.value.continent_id),o.value.country_id="",o.value.zone_id="",g.value=[]},A=()=>{g.value=M.value.filter(e=>e.zone_id==o.value.zone_id),o.value.country_id=""};X(async()=>{await O(p.id),B.includes(p.type)||C.push({name:"home"}),p.type=="article"&&(b.value.value=o.value.content,sceditor.create(b.value,{format:"bbcode",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"})),U.value++,await T(),await D(),await E(),await Z(),h.value=L.value.filter(e=>e.continent_id==o.value.continent_id),g.value=M.value.filter(e=>e.zone_id==o.value.zone_id)});const H=async()=>{if(p.type=="article"&&(o.value.content=b.value.value,U.value==1)){U.value++,V.value="please click again";return}let e=new FormData;e.append("image",o.value.image),e.append("title",o.value.title),e.append("type",o.value.type),e.append("user_id",o.value.user_id),e.append("language",o.value.language),e.append("content",o.value.content),e.append("continent_id",o.value.continent_id),e.append("zone_id",o.value.zone_id),e.append("country_id",o.value.country_id),e.append("ministry_id",o.value.ministry_id),e.append("_method","PUT"),await N(e,p.id),S.value==""&&(p.type=="article"?C.push({name:"compte",params:{name:_.firstname,id:_.id,redirect:"article"}}):C.push({name:"compte",params:{name:_.firstname,id:_.id,redirect:"propau"}}))},K=async()=>{console.log(z.value.files[0]),o.value.image=z.value.files[0]},v=e=>{q=e,localStorage.lang=q};function G(e){return URL.createObjectURL(e)}function Q(e){return URL.revokeObjectURL(e)}return(e,i)=>(a(),l("div",de,[t("div",ue,[t("h1",ce,n(e.$t("edit"))+" "+n(c.type),1),t("h2",pe,n(e.$t("your"))+" "+n(c.type)+" "+n(e.$t("add-desc-1")),1),t("div",me,[t("h1",ye,n(e.$t("select-lang"))+" :",1),t("div",ge,[t("button",{class:x([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[0]||(i[0]=f(s=>v("fr"),["prevent"]))},n(e.$t("fr")),3),t("button",{class:x([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[1]||(i[1]=f(s=>v("en"),["prevent"]))},n(e.$t("en")),3),t("button",{class:x([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[2]||(i[2]=f(s=>v("es"),["prevent"]))},n(e.$t("es")),3),t("button",{class:x([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[3]||(i[3]=f(s=>v("pt"),["prevent"]))},n(e.$t("pt")),3)])])]),t("section",fe,[r(S)!=""?(a(),Y(ee,{key:0},{default:P(()=>[d(n(r(S)),1)]),_:1})):u("",!0),t("h1",_e,n(e.$t("edit"))+" "+n(c.type),1),t("h2",be,n(e.$t("good-msg-post"))+" ! ",1),t("form",{onSubmit:i[12]||(i[12]=f(s=>H(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",he,[t("div",ve,[t("label",xe,[d(n(e.$t("title"))+" ",1),ke]),y(t("input",{required:"","onUpdate:modelValue":i[4]||(i[4]=s=>r(o).title=s),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[F,r(o).title]]),t("span",we,n(r(o).title?r(o).title.length:0)+" of 50 Characters",1)]),t("div",$e,[t("label",Ce,[d(n(e.$t("continent"))+" ",1),ze]),y(t("select",{required:"","onUpdate:modelValue":i[5]||(i[5]=s=>r(o).continent_id=s),onChange:J,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(w,null,$(r(R),s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",Ue,n(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Ve,n(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",qe,n(s.name_es),1)):(a(),l("span",je,n(s.name_pt),1))],8,Se))),128))],544),[[k,r(o).continent_id]])]),t("div",Le,[t("label",Me,[d(n(e.$t("zoned"))+" ",1),Pe]),y(t("select",{required:"","onUpdate:modelValue":i[6]||(i[6]=s=>r(o).zone_id=s),onChange:A,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[h.value.length!=0?(a(!0),l(w,{key:0},$(h.value,s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",Be,n(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Ne,n(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",Oe,n(s.name_es),1)):(a(),l("span",Re,n(s.name_pt),1))],8,Fe))),128)):(a(),l("option",Te," Select "+n(e.$t("continent")),1))],544),[[k,r(o).zone_id]])]),t("div",De,[t("label",Ee,[d(n(e.$t("country"))+" ",1),Ie]),y(t("select",{required:"","onUpdate:modelValue":i[7]||(i[7]=s=>r(o).country_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[g.value.length!=0?(a(!0),l(w,{key:0},$(g.value,s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",Je,n(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Ae,n(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",He,n(s.name_es),1)):(a(),l("span",Ke,n(s.name_pt),1))],8,Ze))),128)):(a(),l("option",Ge," Select "+n(e.$t("zoned")),1))],512),[[k,r(o).country_id]])]),t("div",Qe,[t("label",We,[d(n(e.$t("ministry"))+" ",1),Xe]),y(t("select",{required:"","onUpdate:modelValue":i[8]||(i[8]=s=>r(o).ministry_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(w,null,$(r(I),s=>(a(),l("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(a(),l("span",et,n(s.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",tt,n(s.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",st,n(s.name_es),1)):(a(),l("span",ot,n(s.name_pt),1))],8,Ye))),128))],512),[[k,r(o).ministry_id]])]),c.type=="article"?(a(),l("div",nt,[t("label",at,[d(n(e.$t("thumbnails"))+" ",1),lt]),t("div",rt,[r(o).image?(a(),l("img",{key:0,src:typeof r(o).image=="string"?r(o).image:G(r(o).image),onLoad:i[9]||(i[9]=s=>typeof r(o).image=="string"?"":Q(r(o).image)),class:"h-16 w-16 rounded-full",alt:r(o).title},null,40,it)):u("",!0),t("input",{ref_key:"file",ref:z,onChange:i[10]||(i[10]=s=>K()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):u("",!0),t("div",dt,[t("label",ut,[d(n(e.$t("content"))+" ",1),ct]),c.type=="article"?(a(),l("textarea",{key:0,required:"",ref_key:"textarea",ref:b,class:"h-96 w-full"},`\r
                        `,512)):(a(),l("div",pt,[r(o).content?y((a(),l("textarea",{key:0,required:"","onUpdate:modelValue":i[11]||(i[11]=s=>r(o).content=s),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512)),[[F,r(o).content]]):u("",!0),r(o).content?(a(),l("span",mt,n(r(o).content.length)+" of 2000 Characters",1)):u("",!0)]))])]),t("div",yt,[r(j)==0?(a(),l("button",gt,n(e.$t("save")),1)):u("",!0),r(j)==1?(a(),l("button",ft,bt)):u("",!0),te(se,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:P(()=>[V.value!=""?(a(),l("span",ht,n(V.value),1)):u("",!0)]),_:1})])],32)])]))}};export{zt as default};
