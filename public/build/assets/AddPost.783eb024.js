import{u as X,r as c,a as Y,o as ee,c as n,d as a,e as t,t as s,h as r,O as v,l as f,g as m,k as te,w as L,P as se,m as u,j as y,K as R,J as x,F as k,x as w,f as F,T as oe,H as ne,b as ae}from"./app.3c71ebbd.js";import{u as le}from"./postServices.5788633a.js";import{u as ie}from"./continentServices.e9c543f8.js";import{u as re}from"./zoneServices.7feab0d1.js";import{u as de}from"./countryServices.51b2dc1b.js";import{u as ce}from"./ministryServices.d8326c5b.js";const ue={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},pe={class:"w-full space-y-4 py-5 text-center"},me={class:"text-4xl font-bold capitalize text-primary-blue"},ye={key:0},ge={key:1},fe={class:"text-md text-gray-700"},_e={key:0},he={key:1},be={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},ve={class:"font-semibold"},xe={class:"mt-3 inline-flex w-full justify-center space-x-3 text-xs lg:mt-0 lg:text-sm"},ke={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},we={class:"text-xl font-semibold"},$e={key:0},Ce={key:1},qe={class:"text-md font-light text-gray-700"},Se={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Ue={class:"col-span-2"},ze={class:"text-gray-700"},Ve=t("span",{class:"text-red-500"},"*",-1),je={class:"text-xs font-light text-gray-400"},Le={class:"col-span-2 lg:col-span-1"},Re={class:"text-gray-700",for:"es"},Fe=t("span",{class:"text-red-500"},"*",-1),Me=["value"],Pe={key:0},Ne={key:1},Oe={key:2},Be={key:3},De={class:"col-span-2 lg:col-span-1"},Te={class:"text-gray-700",for:"pt"},Ee=t("span",{class:"text-red-500"},"*",-1),Ie=["value"],Ze={key:0},Ae={key:1},Je={key:2},He={key:3},Ke={key:1,value:"null"},Ge={class:"col-span-2 lg:col-span-1"},Qe={class:"text-gray-700",for:"es"},We=t("span",{class:"text-red-500"},"*",-1),Xe=["value"],Ye={key:0},et={key:1},tt={key:2},st={key:3},ot={key:1,value:"null"},nt={class:"col-span-2 lg:col-span-1"},at={class:"text-gray-700",for:"pt"},lt=t("span",{class:"text-red-500"},"*",-1),it=["value"],rt={key:0},dt={key:1},ct={key:2},ut={key:3},pt={key:0,class:"col-span-2"},mt={class:"text-gray-700",for:"fr"},yt=t("span",{class:"text-red-500"},"*",-1),gt={class:"flex items-center space-x-4 py-4"},ft=["src","alt"],_t={class:"col-span-2"},ht={class:"text-gray-700",for:"pt"},bt=t("span",{class:"text-red-500"},"*",-1),vt={key:1},xt={class:"text-xs font-light text-gray-400"},kt={key:2,class:"text-xs font-light italic"},wt={class:"ml-1 text-primary-blue"},$t={href:"/add/propau"},Ct={class:"mt-20"},qt={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},St={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},Ut={key:0,class:"text-xs font-light italic"},Mt={__name:"AddPost",props:{type:{type:String}},setup(p){const d=p,$=ne(),{locale:C}=X();c([]);const M=["article","propau"],g=localStorage.user?JSON.parse(localStorage.user):"",{continents:P,getContinents:N}=ie(),{zones:O,getZones:B}=re(),{countries:D,getCountries:T}=de(),{ministries:E,getMinistries:I}=ce(),_=c(""),q=c(""),V=c(null),S=c([]),h=c([]),U=c(0),l=Y({title:"",type:d.type,user_id:g.id,language:C.value,content:"",image:"",continent_id:"",zone_id:"",country_id:"",ministry_id:""});ee(async()=>{M.includes(d.type)||$.push({name:"home"}),d.type=="article"&&(sceditor.create(_.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),_.value.value=""),U.value++,await N(),await B(),await T(),await I()});const Z=()=>{S.value=O.value.filter(e=>e.continent_id==l.continent_id),l.country_id="",l.zone_id="",h.value=[]},A=()=>{h.value=D.value.filter(e=>e.zone_id==l.zone_id),l.country_id=""},{createPost:J,errors:z,loading:j}=le(),H=async()=>{if(d.type=="article"&&(l.content=_.value.value,U.value==1)){U.value++,q.value="please click again";return}let e=new FormData;e.append("image",l.image),e.append("title",l.title),e.append("type",l.type),e.append("user_id",l.user_id),e.append("language",localStorage.lang),e.append("content",l.content),e.append("continent_id",l.continent_id),e.append("zone_id",l.zone_id),e.append("country_id",l.country_id),e.append("ministry_id",l.ministry_id),await J(e),z.value==""&&(d.type=="article"?$.push({name:"compte",params:{slug:g.slug,id:g.id},query:{redirect:"article"}}):$.push({name:"compte",params:{slug:g.slug,id:g.id},query:{redirect:"propau"}}))},K=()=>{l.image=V.value.files[0]},b=e=>{C.value=e,localStorage.lang=C.value};function G(e){return URL.createObjectURL(e)}function Q(e){return URL.revokeObjectURL(e)}return(e,i)=>{const W=ae("Spin");return n(),a("div",ue,[t("div",pe,[t("h1",me,[d.type=="article"?(n(),a("span",ye,s(e.$t("add")),1)):(n(),a("span",ge,s(e.$tc("add",2)),1)),r(" "+s(d.type),1)]),t("h2",fe,[r(s(e.$t("your"))+" "+s(p.type)+" ",1),d.type=="article"?(n(),a("span",_e,s(e.$t("add-desc-1")),1)):(n(),a("span",he,s(e.$tc("add-desc-1",2)),1))]),t("div",be,[t("h1",ve,s(e.$t("select-lang"))+" :",1),t("div",xe,[t("button",{class:v([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[0]||(i[0]=f(o=>b("fr"),["prevent"]))},s(e.$t("fr")),3),t("button",{class:v([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[1]||(i[1]=f(o=>b("en"),["prevent"]))},s(e.$t("en")),3),t("button",{class:v([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[2]||(i[2]=f(o=>b("es"),["prevent"]))},s(e.$t("es")),3),t("button",{class:v([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[3]||(i[3]=f(o=>b("pt"),["prevent"]))},s(e.$t("pt")),3)])])]),t("section",ke,[m(z)!=""?(n(),te(se,{key:0},{default:L(()=>[r(s(m(z)),1)]),_:1})):u("",!0),t("h1",we,[d.type=="article"?(n(),a("span",$e,s(e.$t("add")),1)):(n(),a("span",Ce,s(e.$tc("add",2)),1)),r(" "+s(p.type),1)]),t("h2",qe,s(e.$t("good-msg-post"))+" ! ",1),t("form",{onSubmit:i[12]||(i[12]=f(o=>H(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",Se,[t("div",Ue,[t("label",ze,[r(s(e.$t("title"))+" ",1),Ve]),y(t("input",{required:"","onUpdate:modelValue":i[4]||(i[4]=o=>l.title=o),maxlength:"50",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[R,l.title]]),t("span",je,s(l.title.length)+" of 50 Characters",1)]),t("div",Le,[t("label",Re,[r(s(e.$t("continent"))+" ",1),Fe]),y(t("select",{required:"","onUpdate:modelValue":i[5]||(i[5]=o=>l.continent_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(k,null,w(m(P),o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",Pe,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Ne,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Oe,s(o.name_es),1)):(n(),a("span",Be,s(o.name_pt),1))],8,Me))),128))],544),[[x,l.continent_id]])]),t("div",De,[t("label",Te,[r(s(e.$t("zoned")),1),Ee]),y(t("select",{required:"",onChange:A,"onUpdate:modelValue":i[6]||(i[6]=o=>l.zone_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[S.value.length!=0?(n(!0),a(k,{key:0},w(S.value,o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",Ze,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Ae,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Je,s(o.name_es),1)):(n(),a("span",He,s(o.name_pt),1))],8,Ie))),128)):(n(),a("option",Ke," Requires "+s(e.$t("continent")),1))],544),[[x,l.zone_id]])]),t("div",Ge,[t("label",Qe,[r(s(e.$t("country")),1),We]),y(t("select",{required:"","onUpdate:modelValue":i[7]||(i[7]=o=>l.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[h.value.length!=0?(n(!0),a(k,{key:0},w(h.value,o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",Ye,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",et,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",tt,s(o.name_es),1)):(n(),a("span",st,s(o.name_pt),1))],8,Xe))),128)):(n(),a("option",ot," Requires "+s(e.$t("zoned")),1))],512),[[x,l.country_id]])]),t("div",nt,[t("label",at,[r(s(e.$t("ministry")),1),lt]),y(t("select",{required:"","onUpdate:modelValue":i[8]||(i[8]=o=>l.ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(k,null,w(m(E),o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",rt,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",dt,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",ct,s(o.name_es),1)):(n(),a("span",ut,s(o.name_pt),1))],8,it))),128))],512),[[x,l.ministry_id]])]),p.type=="article"?(n(),a("div",pt,[t("label",mt,[r(s(e.$t("thumbnails"))+" ",1),yt]),t("div",gt,[l.image?(n(),a("img",{key:0,src:typeof l.image=="string"?l.image:G(l.image),onLoad:i[9]||(i[9]=o=>typeof l.image=="string"?"":Q(l.image)),class:"h-16 w-16 rounded-full",alt:l.title},null,40,ft)):u("",!0),t("input",{required:"",ref_key:"file",ref:V,onChange:i[10]||(i[10]=o=>K()),accept:"image/*",type:"file",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):u("",!0),t("div",_t,[t("label",ht,[r(s(e.$t("content"))+" ",1),bt]),p.type=="article"?(n(),a("textarea",{key:0,required:"",ref_key:"textarea",ref:_,class:"h-96 w-full"},`\r
                        `,512)):(n(),a("div",vt,[y(t("textarea",{required:"","onUpdate:modelValue":i[11]||(i[11]=o=>l.content=o),maxlength:"1000",class:"mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512),[[R,l.content]]),t("span",xt,s(l.content.length)+" of 1000 Characters",1)])),p.type=="article"?(n(),a("span",kt,[t("span",null,s(e.$t("instead-add-propau")),1),t("span",wt,[t("a",$t,s(e.$tc("add",2))+" PropAU",1)])])):u("",!0)])]),t("div",Ct,[m(j)==0?(n(),a("button",qt,s(e.$t("save")),1)):u("",!0),m(j)==1?(n(),a("button",St,[F(W,{size:"small"})])):u("",!0),F(oe,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:L(()=>[q.value!=""?(n(),a("span",Ut,s(q.value),1)):u("",!0)]),_:1})])],32)])])}}};export{Mt as default};
