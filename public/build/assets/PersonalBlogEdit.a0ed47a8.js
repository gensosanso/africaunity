import{r as p,o as T,c as n,d as l,e as t,t as o,g as a,k as q,w as x,h as u,m as d,l as D,j as y,K as v,J as F,F as M,x as O,f as k,T as I,H as z,b as w}from"./app.fba3b33f.js";import{u as H}from"./categoryPersonalPostServices.6f3f96a0.js";import{u as J}from"./personalPostsServices.6531b363.js";const K={class:"text-center text-2xl font-bold text-gray-500 sm:text-4xl"},A={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},G={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Q={class:"col-span-2"},W={class:"dark:text-gray-200 text-gray-700"},X=t("span",{class:"text-red-500"},"*",-1),Y={key:0,class:"text-xs font-light text-gray-400"},Z={class:"col-span-2"},ee={class:"dark:text-gray-200 text-gray-700",for:"es"},te=t("span",{class:"text-red-500"},"*",-1),se=["value"],ae={key:0},oe={key:1},re={key:2},ne={key:3},le={class:"col-span-2"},ie={class:"dark:text-gray-200 text-gray-700"},de={key:0,class:"text-xs font-light text-gray-400"},ue={class:"col-span-2"},ce={class:"dark:text-gray-200 text-gray-700",for:"fr"},pe=t("span",{class:"text-red-500"},"*",-1),me={class:"flex items-center space-x-4 py-4"},ge=["src","alt"],fe={class:"col-span-2"},ye={class:"dark:text-gray-200 text-gray-700",for:"pt"},be=t("span",{class:"text-red-500"},"*",-1),_e={class:"mt-20"},he={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},xe={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},ve={key:0,class:"text-xs font-light italic"},Ue={__name:"PersonalBlogEdit",props:{id:[String,Number]},emits:["back"],setup($,{emit:ke}){const b=$,{getPersonalPost:C,updatePersonalPost:U,errors:m,loading:_,personalPost:e}=J(),{categoryPersonalPosts:P,getCategoryPersonalPosts:V}=H(),g=p(0),c=p(null),f=p(""),h=p(null),j=z();T(async()=>{await C(b.id),c.value.value=e.value.content,sceditor.create(c.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),g.value++,await V()});const L=async()=>{if(e.value.content=c.value.value,g.value==1){g.value++,f.value="please click again";return}let s=new FormData;s.append("image",e.value.image),s.append("title",e.value.title),s.append("subtheme",e.value.subtheme),s.append("user_id",e.value.user_id),s.append("content",e.value.content),s.append("category_personal_post_id",e.value.category_personal_post_id),s.append("_method","PUT"),await U(s,b.id),m.value==""&&j.push({name:"admin.personal-post.index"})},S=()=>{e.value.image=h.value.files[0]};function B(s){return URL.createObjectURL(s)}function E(s){return URL.revokeObjectURL(s)}return(s,i)=>{const N=w("Error"),R=w("Spin");return n(),l("div",null,[t("h1",K,o(s.$tc("edit",1))+" Post ",1),t("section",A,[a(m)!=""?(n(),q(N,{key:0},{default:x(()=>[u(o(a(m)),1)]),_:1})):d("",!0),t("form",{onSubmit:i[5]||(i[5]=D(r=>L(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",G,[t("div",Q,[t("label",W,[u(o(s.$t("title"))+" ",1),X]),y(t("input",{required:"","onUpdate:modelValue":i[0]||(i[0]=r=>a(e).title=r),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[v,a(e).title]]),a(e).title?(n(),l("span",Y,o(a(e).title.length)+" of 50 Characters",1)):d("",!0)]),t("div",Z,[t("label",ee,[u(o(s.$t("theme"))+" ",1),te]),y(t("select",{required:"","onUpdate:modelValue":i[1]||(i[1]=r=>a(e).category_personal_post_id=r),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(M,null,O(a(P),r=>(n(),l("option",{key:r.id,value:r.id},[s.$i18n.locale=="en"?(n(),l("span",ae,o(r.name_en),1)):s.$i18n.locale=="fr"?(n(),l("span",oe,o(r.name_fr),1)):s.$i18n.locale=="es"?(n(),l("span",re,o(r.name_es),1)):(n(),l("span",ne,o(r.name_pt),1))],8,se))),128))],512),[[F,a(e).category_personal_post_id]])]),t("div",le,[t("label",ie,o(s.$t("subtheme")),1),y(t("input",{"onUpdate:modelValue":i[2]||(i[2]=r=>a(e).subtheme=r),maxlength:"255",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[v,a(e).subtheme]]),a(e).subtheme?(n(),l("span",de,o(a(e).subtheme.length)+" of 255 Characters",1)):d("",!0)]),t("div",ue,[t("label",ce,[u(o(s.$t("thumbnails"))+" ",1),pe]),t("div",me,[a(e).image?(n(),l("img",{key:0,src:typeof a(e).image=="string"?a(e).image:B(a(e).image),onLoad:i[3]||(i[3]=r=>typeof a(e).image=="string"?"":E(a(e).image)),class:"h-16 w-16 rounded-full",alt:a(e).title},null,40,ge)):d("",!0),t("input",{ref_key:"file",ref:h,onChange:i[4]||(i[4]=r=>S()),accept:"image/*",type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])]),t("div",fe,[t("label",ye,[u(o(s.$t("content"))+" ",1),be]),t("textarea",{required:"",ref_key:"textarea",ref:c,class:"h-96 w-full"},`\r
                        `,512)])]),t("div",_e,[a(_)==0?(n(),l("button",he,o(s.$t("save")),1)):d("",!0),a(_)==1?(n(),l("button",xe,[u(o(s.$t("save"))+"... ",1),k(R,{size:"small"})])):d("",!0),k(I,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:x(()=>[f.value!=""?(n(),l("span",ve,o(f.value),1)):d("",!0)]),_:1})])],32)])])}}};export{Ue as default};
