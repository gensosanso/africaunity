import{u as X,r as c,a as Y,o as ee,c as n,d as a,e as t,t as s,h as i,O as k,l as f,g as y,k as te,w as L,P as se,m as u,j as m,K as F,J as v,F as x,x as w,f as M,T as oe,I as ne,b as ae}from"./app.a6e0b7af.js";import{u as re}from"./postServices.ec0b2ea2.js";import{u as le}from"./continentServices.7d39236e.js";import{u as ie}from"./zoneServices.558e62e1.js";import{u as de}from"./countryServices.205b0384.js";import{u as ce}from"./ministryServices.c3bacdfa.js";const ue={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},pe={class:"w-full space-y-4 py-5 text-center"},ye={class:"text-4xl font-bold capitalize text-primary-blue"},me={key:0},ge={key:1},fe={class:"text-md text-gray-700"},_e={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},be={class:"font-semibold"},he={class:"mt-3 inline-flex w-full justify-center space-x-3 text-xs lg:mt-0 lg:text-sm"},ke={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},ve={class:"text-xl font-semibold"},xe={key:0},we={key:1},$e={class:"text-md font-light text-gray-700"},Ce={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Se={class:"col-span-2"},Ue={class:"dark:text-gray-200 text-gray-700"},ze=t("span",{class:"text-red-500"},"*",-1),Ve={class:"text-xs font-light text-gray-400"},qe={class:"col-span-2 lg:col-span-1"},je={class:"dark:text-gray-200 text-gray-700",for:"es"},Le=t("span",{class:"text-red-500"},"*",-1),Fe=["value"],Me={key:0},Pe={key:1},Ne={key:2},Oe={key:3},Re={class:"col-span-2 lg:col-span-1"},Be={class:"dark:text-gray-200 text-gray-700",for:"pt"},De=t("span",{class:"text-red-500"},"*",-1),Ie=["value"],Te={key:0},Ee={key:1},Ze={key:2},Ae={key:3},Je={key:1,value:"null"},Ke={class:"col-span-2 lg:col-span-1"},Ge={class:"dark:text-gray-200 text-gray-700",for:"es"},He=t("span",{class:"text-red-500"},"*",-1),Qe=["value"],We={key:0},Xe={key:1},Ye={key:2},et={key:3},tt={key:1,value:"null"},st={class:"col-span-2 lg:col-span-1"},ot={class:"dark:text-gray-200 text-gray-700",for:"pt"},nt=t("span",{class:"text-red-500"},"*",-1),at=["value"],rt={key:0},lt={key:1},it={key:2},dt={key:3},ct={key:0,class:"col-span-2"},ut={class:"dark:text-gray-200 text-gray-700",for:"fr"},pt=t("span",{class:"text-red-500"},"*",-1),yt={class:"flex items-center space-x-4 py-4"},mt=["src","alt"],gt={class:"col-span-2"},ft={class:"dark:text-gray-200 text-gray-700",for:"pt"},_t=t("span",{class:"text-red-500"},"*",-1),bt={key:1},ht={class:"text-xs font-light text-gray-400"},kt={key:2,class:"text-xs font-light italic"},vt={class:"ml-1 text-primary-blue"},xt={href:"/add/propau"},wt={class:"mt-20"},$t={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},Ct={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},St={key:0,class:"text-xs font-light italic"},Ft={__name:"AddPost",props:{type:{type:String}},setup(p){const d=p,$=ne(),{locale:V}=X();c([]);const P=["article","propau"],g=localStorage.user?JSON.parse(localStorage.user):"",{continents:N,getContinents:O}=le(),{zones:R,getZones:B}=ie(),{countries:D,getCountries:I}=de(),{ministries:T,getMinistries:E}=ce(),_=c(""),C=c(""),q=c(null),S=c([]),b=c([]),U=c(0),r=Y({title:"",type:d.type,user_id:g.id,language:"fr",content:"",image:"",continent_id:"",zone_id:"",country_id:"",ministry_id:""});ee(async()=>{P.includes(d.type)||$.push({name:"home"}),d.type=="article"&&(sceditor.create(_.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),_.value.value==""),U.value++,await O(),await B(),await I(),await E()});const Z=()=>{S.value=R.value.filter(e=>e.continent_id==r.continent_id),r.country_id="",r.zone_id="",b.value=[]},A=()=>{b.value=D.value.filter(e=>e.zone_id==r.zone_id),r.country_id=""},{createPost:J,errors:z,loading:j}=re(),K=async()=>{if(d.type=="article"&&(r.content=_.value.value,U.value==1)){U.value++,C.value="please click again";return}let e=new FormData;e.append("image",r.image),e.append("title",r.title),e.append("type",r.type),e.append("user_id",r.user_id),e.append("language",localStorage.lang),e.append("content",r.content),e.append("continent_id",r.continent_id),e.append("zone_id",r.zone_id),e.append("country_id",r.country_id),e.append("ministry_id",r.ministry_id),await J(e),z.value==""&&(d.type=="article"?$.push({name:"compte",params:{slug:g.slug,id:g.id,redirect:"article"}}):$.push({name:"compte",params:{slug:g.slug,id:g.id,redirect:"propau"}}))},G=()=>{r.image=q.value.files[0]},h=e=>{V.value=e,localStorage.lang=V.value};function H(e){return URL.createObjectURL(e)}function Q(e){return URL.revokeObjectURL(e)}return(e,l)=>{const W=ae("Spin");return n(),a("div",ue,[t("div",pe,[t("h1",ye,[d.type=="article"?(n(),a("span",me,s(e.$t("add")),1)):(n(),a("span",ge,s(e.$tc("add",2)),1)),i(" "+s(d.type),1)]),t("h2",fe,s(e.$t("your"))+" "+s(p.type)+" "+s(e.$t("add-desc-1")),1),t("div",_e,[t("h1",be,s(e.$t("select-lang"))+" :",1),t("div",he,[t("button",{class:k([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[0]||(l[0]=f(o=>h("fr"),["prevent"]))},s(e.$t("fr")),3),t("button",{class:k([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[1]||(l[1]=f(o=>h("en"),["prevent"]))},s(e.$t("en")),3),t("button",{class:k([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[2]||(l[2]=f(o=>h("es"),["prevent"]))},s(e.$t("es")),3),t("button",{class:k([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[3]||(l[3]=f(o=>h("pt"),["prevent"]))},s(e.$t("pt")),3)])])]),t("section",ke,[y(z)!=""?(n(),te(se,{key:0},{default:L(()=>[i(s(y(z)),1)]),_:1})):u("",!0),t("h1",ve,[d.type=="article"?(n(),a("span",xe,s(e.$t("add")),1)):(n(),a("span",we,s(e.$tc("add",2)),1)),i(" "+s(p.type),1)]),t("h2",$e,s(e.$t("good-msg-post"))+" ! ",1),t("form",{onSubmit:l[12]||(l[12]=f(o=>K(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",Ce,[t("div",Se,[t("label",Ue,[i(s(e.$t("title"))+" ",1),ze]),m(t("input",{required:"","onUpdate:modelValue":l[4]||(l[4]=o=>r.title=o),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[F,r.title]]),t("span",Ve,s(r.title.length)+" of 50 Characters",1)]),t("div",qe,[t("label",je,[i(s(e.$t("continent"))+" ",1),Le]),m(t("select",{required:"","onUpdate:modelValue":l[5]||(l[5]=o=>r.continent_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(x,null,w(y(N),o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",Me,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Pe,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ne,s(o.name_es),1)):(n(),a("span",Oe,s(o.name_pt),1))],8,Fe))),128))],544),[[v,r.continent_id]])]),t("div",Re,[t("label",Be,[i(s(e.$t("zoned")),1),De]),m(t("select",{required:"",onChange:A,"onUpdate:modelValue":l[6]||(l[6]=o=>r.zone_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[S.value.length!=0?(n(!0),a(x,{key:0},w(S.value,o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",Te,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Ee,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ze,s(o.name_es),1)):(n(),a("span",Ae,s(o.name_pt),1))],8,Ie))),128)):(n(),a("option",Je," Select "+s(e.$t("continent")),1))],544),[[v,r.zone_id]])]),t("div",Ke,[t("label",Ge,[i(s(e.$t("country")),1),He]),m(t("select",{required:"","onUpdate:modelValue":l[7]||(l[7]=o=>r.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[b.value.length!=0?(n(!0),a(x,{key:0},w(b.value,o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",We,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Xe,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ye,s(o.name_es),1)):(n(),a("span",et,s(o.name_pt),1))],8,Qe))),128)):(n(),a("option",tt," Select "+s(e.$t("zoned")),1))],512),[[v,r.country_id]])]),t("div",st,[t("label",ot,[i(s(e.$t("ministry")),1),nt]),m(t("select",{required:"","onUpdate:modelValue":l[8]||(l[8]=o=>r.ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(x,null,w(y(T),o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",rt,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",lt,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",it,s(o.name_es),1)):(n(),a("span",dt,s(o.name_pt),1))],8,at))),128))],512),[[v,r.ministry_id]])]),p.type=="article"?(n(),a("div",ct,[t("label",ut,[i(s(e.$t("thumbnails"))+" ",1),pt]),t("div",yt,[r.image?(n(),a("img",{key:0,src:typeof r.image=="string"?r.image:H(r.image),onLoad:l[9]||(l[9]=o=>typeof r.image=="string"?"":Q(r.image)),class:"h-16 w-16 rounded-full",alt:r.title},null,40,mt)):u("",!0),t("input",{required:"",ref_key:"file",ref:q,onChange:l[10]||(l[10]=o=>G()),accept:"image/*",type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):u("",!0),t("div",gt,[t("label",ft,[i(s(e.$t("content"))+" ",1),_t]),p.type=="article"?(n(),a("textarea",{key:0,required:"",ref_key:"textarea",ref:_,class:"h-96 w-full"},`\r
                        `,512)):(n(),a("div",bt,[m(t("textarea",{required:"","onUpdate:modelValue":l[11]||(l[11]=o=>r.content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512),[[F,r.content]]),t("span",ht,s(r.content.length)+" of 2000 Characters",1)])),p.type=="article"?(n(),a("span",kt,[t("span",null,s(e.$t("instead-add-propau")),1),t("span",vt,[t("a",xt,s(e.$tc("add",2))+" PropAU",1)])])):u("",!0)])]),t("div",wt,[y(j)==0?(n(),a("button",$t,s(e.$t("save")),1)):u("",!0),y(j)==1?(n(),a("button",Ct,[M(W,{size:"small"})])):u("",!0),M(oe,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:L(()=>[C.value!=""?(n(),a("span",St,s(C.value),1)):u("",!0)]),_:1})])],32)])])}}};export{Ft as default};
