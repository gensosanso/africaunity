import{c as o,d as l,e as s,F as _,x as f,f as u,g as i,L as Y,u as R,r as v,a as ee,o as te,M as se,B as oe,t as a,k as N,w as b,m,I as le,h as j,l as ne,j as p,J as x,K as ae,H as re,N as ie,b as B}from"./app.5804264a.js";import{u as de}from"./countryServices.e5be4277.js";import{u as ue}from"./zoneServices.d0d4583e.js";import{u as ce}from"./continentServices.5fff2b65.js";import{u as ye}from"./ministryServices.b68c690c.js";import{u as me}from"./postServices.f7a82651.js";import{r as pe}from"./PhotoIcon.fc0fef1c.js";import{r as _e}from"./PlusCircleIcon.bae382ab.js";import{r as fe}from"./BookOpenIcon.5f804759.js";import{r as ge}from"./UserIcon.e62a5892.js";import{r as he}from"./CalendarIcon.950c2778.js";import{r as ve}from"./ChatBubbleOvalLeftEllipsisIcon.b4495101.js";const be={class:"animate-pulse"},xe={class:"grid grid-cols-1 gap-4 py-8 px-10 md:grid-cols-2"},we={class:"mx-auto h-44 w-32 overflow-hidden"},ke=Y('<div class="flex flex-col items-start justify-center p-6"><div class="mb-4 h-5 w-32 rounded-md bg-gray-200"></div><div class="mb-4 h-2.5 w-5/6 rounded-full bg-gray-200"></div><div class="flex w-full items-center justify-between"><div class="mb-4 h-2.5 w-1/5 rounded-full bg-gray-200"></div><div class="mb-4 h-2.5 w-3/5 rounded-full bg-gray-200"></div></div></div>',1),P={__name:"Article",setup(A){const $=[1,2,3];return(d,c)=>(o(),l("div",be,[s("div",xe,[(o(),l(_,null,f($,g=>s("div",{key:g,class:"rounded bg-gray-100 shadow"},[s("div",we,[u(i(pe),{class:"h-full w-full text-gray-200"})]),ke])),64))])]))}},$e={class:"mx-auto flex min-h-screen w-full flex-col-reverse bg-white p-4 text-lg md:space-y-2 lg:flex-row lg:space-x-2 xl:w-[90%]"},Se={class:"lg:w-[70%]"},qe={class:"text-center text-5xl font-bold capitalize text-primary-blue"},ze={key:0},Ce={key:1},Ve={class:"flex justify-end px-6"},Ne={class:"text-base leading-4"},je={key:0},Be=["src"],Me={class:"p-6"},Ue={key:0},De={key:1},Pe={key:2},Ae={key:3},Fe={class:"mt-4 flex items-center justify-between text-sm"},Le={class:"flex items-center space-x-2 text-xs text-gray-500"},Ee={class:"flex space-x-1"},Ze={class:"hidden space-x-1 lg:flex"},He={href:"#",class:"hover:text-primary-blue"},Ie={class:"item-center flex space-x-1"},Je={href:"#",class:"text-xs hover:text-primary-blue"},Te={key:2},Ge={class:"bg-white lg:w-[30%]"},Ke={class:"z-0 w-full bg-white"},Oe={class:"inline-block bg-primary-blue px-2 py-1 text-white"},Qe={class:"text-md space-y-1 border-t-2 border-primary-blue p-4"},We={class:"text-xs text-gray-500"},Xe={value:"fr"},Ye={value:"en"},Re={value:"es"},et={value:"pt"},tt={class:"text-xs text-gray-500"},st=["placeholder"],ot={class:"text-xs text-gray-500"},lt=s("option",{value:""},"--------------",-1),nt=["value"],at={key:0},rt={key:1},it={key:2},dt={key:3},ut={class:"text-xs text-gray-500"},ct=s("option",{value:""},"--------------",-1),yt=["value"],mt={key:0},pt={key:1},_t={key:2},ft={key:3},gt={key:1,value:"null"},ht={class:"text-xs text-gray-500"},vt=s("option",{value:""},"--------------",-1),bt=["value"],xt={key:0},wt={key:1},kt={key:2},$t={key:3},St={key:1,value:"null"},qt={class:"text-xs text-gray-500"},zt=s("option",{value:""},"--------------",-1),Ct=["value"],Vt={key:0},Nt={key:1},jt={key:2},Bt={key:3},Mt={key:0,type:"submit",class:"mt-3 w-full bg-primary-blue px-8 py-2 text-lg text-white"},Ut={key:1,disabled:"",type:"submit",class:"mt-3 inline-flex w-full cursor-wait items-center justify-center bg-blue-300 px-8 py-2 text-lg text-white"},Kt={__name:"Article",setup(A){re();let{locale:$}=R();const d=ie(),c=v(!1),{posts:g,getPosts:w,filterPost:S,loading:y,page:q,isAll:M,getPostsByDate:U}=me(),{countries:F,getCountries:L}=de(),{zones:E,getZones:Z}=ue(),{continents:H,getContinents:I}=ce(),{ministries:J,getMinistries:T}=ye(),z=v([]),k=v([]),G=localStorage.user?JSON.parse(localStorage.user):"",C=v(null),V=v(!0),n=ee({country:"",continent:"",ministry:"",zone:"",keywords:"",lang:localStorage.lang,type:"article"});te(async()=>{window.addEventListener("scroll",D),"lang"in d.query?(n.continent=d.query.continent,n.zone=d.query.zone,n.ministry=d.query.ministry,n.keywords=d.query.keywords,n.country=d.query.country,n.lang=d.query.lang,c.value=!1,await S({...n})):"search_date"in d.query?(U(d.query.search_date,localStorage.lang),c.value=!0):(await w("article",localStorage.lang),c.value=!1),await I(),await Z(),await L(),await T()}),se(async()=>{q.value=1,window.removeEventListener("scroll",D)}),oe(d,async function(t,r){"lang"in t.query?(n.continent=t.query.continent,n.zone=t.query.zone,n.ministry=t.query.ministry,n.keywords=t.query.keywords,n.country=t.query.country,n.lang=t.query.lang,c.value=!1,await S({...n})):"search_date"in t.query?(U(t.query.search_date,localStorage.lang),c.value=!0):(await w("article",localStorage.lang),c.value=!1)});const D=async t=>{if(C.value){let r=C.value;if("search_date"in d.query)return;r.getBoundingClientRect().bottom<window.innerHeight&&V.value&&!M.value&&n.country==""&&n.continent==""&&n.ministry==""&&n.zone==""&&n.keywords==""&&(V.value=!1,q.value++,await w("article",localStorage.lang),V.value=!0,c.value=!1)}},K=()=>{z.value=E.value.filter(t=>t.continent_id==n.continent),n.country="",n.zone="",k.value=[]},O=()=>{k.value=F.value.filter(t=>t.zone_id==n.zone),n.country=""},Q=async()=>{n.country!=""||n.continent!=""||n.ministry!=""||n.zone!=""||n.keywords!=""?await S({...n}):(q.value=1,M.value=!1,c.value=!1,await w("article",localStorage.lang))};return(t,r)=>{const h=B("router-link"),W=B("NoContent"),X=B("Spin");return o(),l("div",$e,[s("div",Se,[s("h1",qe,[c.value?(o(),l("span",ze,a(t.$t("articles"))+" & PropAu",1)):(o(),l("span",Ce,a(t.$t("articles")),1))]),s("div",Ve,[i(G).type!="business1"?(o(),N(h,{key:0,to:{name:"add.post",params:{type:"article"}},class:"flex items-center justify-start space-x-3 rounded bg-primary-blue px-3 py-2 text-white"},{default:b(()=>[u(i(_e),{class:"h-6 w-6"}),s("p",Ne,a(t.$t("add"))+" Article",1)]),_:1},8,["to"])):m("",!0)]),i(y)==3?(o(),l("div",je,[u(P)])):i(g).length!=0?(o(),l("div",{key:1,class:"grid gap-8 py-8 lg:grid-cols-2 lg:px-10",ref_key:"postsContainer",ref:C},[(o(!0),l(_,null,f(i(g),e=>(o(),l("div",{class:"dark:bg-gray-800 overflow-hidden rounded-lg bg-white shadow-md",key:e.id},[u(h,{to:{name:"show.post",params:{id:e.id,slug:e.slug}}},{default:b(()=>[e.image?(o(),l("img",{key:0,class:"h-44 w-full object-cover",src:e.image,alt:""},null,8,Be)):(o(),N(i(fe),{key:1,class:"h-44 w-full text-gray-500"}))]),_:2},1032,["to"]),s("div",Me,[s("div",null,[s("a",{href:"#",class:"rounded py-1 px-2 text-xs capitalize text-white",style:le("background:"+e.ministry.color)},[t.$i18n.locale=="en"?(o(),l("span",Ue,a(e.ministry.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",De,a(e.ministry.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",Pe,a(e.ministry.name_es),1)):(o(),l("span",Ae,a(e.country.name_pt),1))],4),u(h,{to:{name:"show.post",params:{id:e.id,slug:e.slug}},class:"dark:text-white mt-2 block transform text-2xl font-semibold text-gray-800 transition-colors duration-200 hover:text-gray-600 hover:underline"},{default:b(()=>[j(a(e.title.length<=20?e.title:e.title.substring(0,19)+"..."),1)]),_:2},1032,["to"])]),s("div",Fe,[u(h,{to:{name:"show.post",params:{id:e.id,slug:e.slug}},class:"dark:text-blue-400 text-blue-600 hover:underline"},{default:b(()=>[j(a(t.$t("read-more")),1)]),_:2},1032,["to"]),s("div",Le,[s("div",Ee,[u(i(ge),{class:"h-4 w-4"}),u(h,{to:{name:"compte",params:{slug:e.user.slug,id:e.user.id}},class:"hover:text-primary-blue"},{default:b(()=>[j(a(e.user.firstname),1)]),_:2},1032,["to"])]),s("div",Ze,[u(i(he),{class:"h-4 w-4"}),s("a",He,a(new Date(e.date).toLocaleDateString(i($),{day:"numeric",year:"numeric",month:"long"})),1)]),s("div",Ie,[u(i(ve),{class:"h-4 w-4 text-gray-500"}),s("a",Je,a(e.comments),1)])])])])]))),128))],512)):m("",!0),i(y)==1?(o(),l("div",Te,[u(P)])):m("",!0),i(g).length==0&&i(y)!=1?(o(),N(W,{key:3})):m("",!0)]),s("div",Ge,[s("div",Ke,[s("h1",Oe,a(t.$t("filter-article")),1),s("form",{onSubmit:r[8]||(r[8]=ne(e=>Q(),["prevent"]))},[s("div",Qe,[s("div",null,[s("label",We,a(t.$t("language")),1),p(s("select",{"onUpdate:modelValue":r[0]||(r[0]=e=>n.lang=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[s("option",Xe,a(t.$t("fr")),1),s("option",Ye,a(t.$t("en")),1),s("option",Re,a(t.$t("es")),1),s("option",et,a(t.$t("pt")),1)],512),[[x,n.lang]])]),s("div",null,[s("label",tt,a(t.$t("key-words")),1),p(s("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>n.keywords=e),placeholder:t.$t("key-words"),class:"form-input mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},null,8,st),[[ae,n.keywords]])]),s("div",null,[s("label",ot,a(t.$t("continent")),1),p(s("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>n.continent=e),onChange:r[3]||(r[3]=e=>K()),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[lt,(o(!0),l(_,null,f(i(H),e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",at,a(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",rt,a(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",it,a(e.name_es),1)):(o(),l("span",dt,a(e.name_pt),1))],8,nt))),128))],544),[[x,n.continent]])]),s("div",null,[s("label",ut,a(t.$t("zoned")),1),p(s("select",{"onUpdate:modelValue":r[4]||(r[4]=e=>n.zone=e),onChange:r[5]||(r[5]=e=>O()),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[ct,z.value.length!=0?(o(!0),l(_,{key:0},f(z.value,e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",mt,a(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",pt,a(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",_t,a(e.name_es),1)):(o(),l("span",ft,a(e.name_pt),1))],8,yt))),128)):(o(),l("option",gt," Select "+a(t.$t("continent")),1))],544),[[x,n.zone]])]),s("div",null,[s("label",ht,a(t.$t("country")),1),p(s("select",{"onUpdate:modelValue":r[6]||(r[6]=e=>n.country=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[vt,k.value.length!=0?(o(!0),l(_,{key:0},f(k.value,e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",xt,a(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",wt,a(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",kt,a(e.name_es),1)):(o(),l("span",$t,a(e.name_pt),1))],8,bt))),128)):(o(),l("option",St," Select "+a(t.$t("zoned")),1))],512),[[x,n.country]])]),s("div",null,[s("label",qt,a(t.$t("ministry")),1),p(s("select",{"onUpdate:modelValue":r[7]||(r[7]=e=>n.ministry=e),class:"form-select mt-1 block w-full border-gray-300 px-3 py-2 text-xs focus:border-primary-blue focus:ring-primary-blue"},[zt,(o(!0),l(_,null,f(i(J),e=>(o(),l("option",{key:e.id,value:e.id},[t.$i18n.locale=="en"?(o(),l("span",Vt,a(e.name_en),1)):t.$i18n.locale=="fr"?(o(),l("span",Nt,a(e.name_fr),1)):t.$i18n.locale=="es"?(o(),l("span",jt,a(e.name_es),1)):(o(),l("span",Bt,a(e.name_pt),1))],8,Ct))),128))],512),[[x,n.ministry]])]),s("div",null,[i(y)==0||i(y)==2?(o(),l("button",Mt,a(t.$t("filter")),1)):m("",!0),i(y)==1?(o(),l("button",Ut,[u(X,{size:"small"})])):m("",!0)])])],32)])])])}}};export{Kt as default};
