import{r as m,u as Y,o as ee,c as a,d as l,e as n,t as o,h as d,O as x,l as g,g as i,k as te,w as R,P as se,m as u,j as y,K as F,J as k,F as w,x as $,f as M,T as oe,H as ne,b as ae}from"./app.4afc0db7.js";import{u as le}from"./postServices.de27f295.js";import{u as ie}from"./continentServices.5916acc0.js";import{u as re}from"./zoneServices.419a04b6.js";import{u as de}from"./countryServices.e89c773f.js";import{u as ue}from"./ministryServices.b6ba7987.js";const ce={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},pe={class:"w-full space-y-4 py-5 text-center"},me={class:"text-4xl font-bold capitalize text-primary-blue"},ye={class:"text-md text-gray-700"},fe={key:0},ge={key:1},_e={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},he={class:"font-semibold"},be={class:"mt-3 flex space-x-3 text-xs lg:mt-0 lg:text-sm"},ve={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},xe={class:"text-xl font-semibold"},ke={class:"text-md font-light text-gray-700"},we={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},$e={class:"col-span-2"},Ce={class:"text-gray-700"},qe=n("span",{class:"text-red-500"},"*",-1),ze={class:"text-xs font-light text-gray-400"},Se={class:"col-span-2 lg:col-span-1"},Ue={class:"text-gray-700",for:"es"},Ve=n("span",{class:"text-red-500"},"*",-1),je=["value"],Le={key:0},Pe={key:1},Re={key:2},Fe={key:3},Me={class:"col-span-2 lg:col-span-1"},Ne={class:"text-gray-700",for:"pt"},Oe=n("span",{class:"text-red-500"},"*",-1),Te=["value"],Be={key:0},De={key:1},Ee={key:2},Ie={key:3},Ze={key:1,value:"null"},Je={class:"col-span-2 lg:col-span-1"},He={class:"text-gray-700",for:"es"},Ke=n("span",{class:"text-red-500"},"*",-1),Ae=["value"],Ge={key:0},Qe={key:1},We={key:2},Xe={key:3},Ye={key:1,value:"null"},et={class:"col-span-2 lg:col-span-1"},tt={class:"text-gray-700",for:"pt"},st=n("span",{class:"text-red-500"},"*",-1),ot=["value"],nt={key:0},at={key:1},lt={key:2},it={key:3},rt={key:0,class:"col-span-2"},dt={class:"text-gray-700",for:"fr"},ut=n("span",{class:"text-red-500"},"*",-1),ct={class:"flex items-center space-x-4 py-4"},pt=["src","alt"],mt={class:"col-span-2"},yt={class:"text-gray-700",for:"pt"},ft=n("span",{class:"text-red-500"},"*",-1),gt={key:1},_t={key:1,class:"text-xs font-light text-gray-400"},ht={class:"mt-20"},bt={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},vt={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},xt={key:0,class:"text-xs font-light italic"},St={__name:"EditPost",props:{type:{required:!0,type:String},id:{required:!0,type:String}},setup(p){const c=p,C=ne(),q=m(null);let{locale:V}=Y();const N=["article","propau"],_=localStorage.user?JSON.parse(localStorage.user):"",{updatePost:O,getPost:T,post:s,errors:z,loading:j}=le(),{continents:B,getContinents:D}=ie(),{zones:L,getZones:E}=re(),{countries:P,getCountries:I}=de(),{ministries:Z,getMinistries:J}=ue(),h=m(""),S=m(0),U=m(""),b=m([]),f=m([]),H=()=>{b.value=L.value.filter(e=>e.continent_id==s.value.continent_id),s.value.country_id="",s.value.zone_id="",f.value=[]},K=()=>{f.value=P.value.filter(e=>e.zone_id==s.value.zone_id),s.value.country_id=""};ee(async()=>{await T(c.id),N.includes(c.type)||C.push({name:"home"}),c.type=="article"&&(h.value.value=s.value.content,sceditor.create(h.value,{format:"bbcode",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"})),S.value++,await D(),await E(),await I(),await J(),b.value=L.value.filter(e=>e.continent_id==s.value.continent_id),f.value=P.value.filter(e=>e.zone_id==s.value.zone_id)});const A=async()=>{if(c.type=="article"&&(s.value.content=h.value.value,S.value==1)){S.value++,U.value="please click again";return}let e=new FormData;e.append("image",s.value.image),e.append("title",s.value.title),e.append("type",s.value.type),e.append("user_id",s.value.user_id),e.append("language",s.value.language),e.append("content",s.value.content),e.append("continent_id",s.value.continent_id),e.append("zone_id",s.value.zone_id),e.append("country_id",s.value.country_id),e.append("ministry_id",s.value.ministry_id),e.append("_method","PUT"),await O(e,c.id),z.value==""&&(c.type=="article"?C.push({name:"compte",params:{name:_.firstname,id:_.id},query:{redirect:"article"}}):C.push({name:"compte",params:{name:_.firstname,id:_.id},query:{redirect:"propau"}}))},G=async()=>{console.log(q.value.files[0]),s.value.image=q.value.files[0]},v=e=>{V=e,localStorage.lang=V};function Q(e){return URL.createObjectURL(e)}function W(e){return URL.revokeObjectURL(e)}return(e,r)=>{const X=ae("Spin");return a(),l("div",ce,[n("div",pe,[n("h1",me,o(e.$t("edit"))+" "+o(p.type),1),n("h2",ye,[d(o(e.$t("your"))+" "+o(p.type)+" ",1),c.type=="article"?(a(),l("span",fe,o(e.$t("add-desc-1")),1)):(a(),l("span",ge,o(e.$tc("add-desc-1",2)),1))]),n("div",_e,[n("h1",he,o(e.$t("select-lang"))+" :",1),n("div",be,[n("button",{class:x([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[0]||(r[0]=g(t=>v("fr"),["prevent"]))},o(e.$t("fr")),3),n("button",{class:x([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[1]||(r[1]=g(t=>v("en"),["prevent"]))},o(e.$t("en")),3),n("button",{class:x([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[2]||(r[2]=g(t=>v("es"),["prevent"]))},o(e.$t("es")),3),n("button",{class:x([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:r[3]||(r[3]=g(t=>v("pt"),["prevent"]))},o(e.$t("pt")),3)])])]),n("section",ve,[i(z)!=""?(a(),te(se,{key:0},{default:R(()=>[d(o(i(z)),1)]),_:1})):u("",!0),n("h1",xe,o(e.$t("edit"))+" "+o(p.type),1),n("h2",ke,o(e.$t("good-msg-post"))+" ! ",1),n("form",{onSubmit:r[12]||(r[12]=g(t=>A(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[n("div",we,[n("div",$e,[n("label",Ce,[d(o(e.$t("title"))+" ",1),qe]),y(n("input",{required:"","onUpdate:modelValue":r[4]||(r[4]=t=>i(s).title=t),maxlength:"50",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[F,i(s).title]]),n("span",ze,o(i(s).title?i(s).title.length:0)+" of 50 Characters",1)]),n("div",Se,[n("label",Ue,[d(o(e.$t("continent"))+" ",1),Ve]),y(n("select",{required:"","onUpdate:modelValue":r[5]||(r[5]=t=>i(s).continent_id=t),onChange:H,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(w,null,$(i(B),t=>(a(),l("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(a(),l("span",Le,o(t.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Pe,o(t.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",Re,o(t.name_es),1)):(a(),l("span",Fe,o(t.name_pt),1))],8,je))),128))],544),[[k,i(s).continent_id]])]),n("div",Me,[n("label",Ne,[d(o(e.$t("zoned"))+" ",1),Oe]),y(n("select",{required:"","onUpdate:modelValue":r[6]||(r[6]=t=>i(s).zone_id=t),onChange:K,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[b.value.length!=0?(a(!0),l(w,{key:0},$(b.value,t=>(a(),l("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(a(),l("span",Be,o(t.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",De,o(t.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",Ee,o(t.name_es),1)):(a(),l("span",Ie,o(t.name_pt),1))],8,Te))),128)):(a(),l("option",Ze," Requires "+o(e.$t("continent")),1))],544),[[k,i(s).zone_id]])]),n("div",Je,[n("label",He,[d(o(e.$t("country"))+" ",1),Ke]),y(n("select",{required:"","onUpdate:modelValue":r[7]||(r[7]=t=>i(s).country_id=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[f.value.length!=0?(a(!0),l(w,{key:0},$(f.value,t=>(a(),l("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(a(),l("span",Ge,o(t.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",Qe,o(t.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",We,o(t.name_es),1)):(a(),l("span",Xe,o(t.name_pt),1))],8,Ae))),128)):(a(),l("option",Ye," Requires "+o(e.$t("zoned")),1))],512),[[k,i(s).country_id]])]),n("div",et,[n("label",tt,[d(o(e.$t("ministry"))+" ",1),st]),y(n("select",{required:"","onUpdate:modelValue":r[8]||(r[8]=t=>i(s).ministry_id=t),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(a(!0),l(w,null,$(i(Z),t=>(a(),l("option",{key:t.id,value:t.id},[e.$i18n.locale=="en"?(a(),l("span",nt,o(t.name_en),1)):e.$i18n.locale=="fr"?(a(),l("span",at,o(t.name_fr),1)):e.$i18n.locale=="es"?(a(),l("span",lt,o(t.name_es),1)):(a(),l("span",it,o(t.name_pt),1))],8,ot))),128))],512),[[k,i(s).ministry_id]])]),p.type=="article"?(a(),l("div",rt,[n("label",dt,[d(o(e.$t("thumbnails"))+" ",1),ut]),n("div",ct,[i(s).image?(a(),l("img",{key:0,src:typeof i(s).image=="string"?i(s).image:Q(i(s).image),onLoad:r[9]||(r[9]=t=>typeof i(s).image=="string"?"":W(i(s).image)),class:"h-16 w-16 rounded-full",alt:i(s).title},null,40,pt)):u("",!0),n("input",{ref_key:"file",ref:q,onChange:r[10]||(r[10]=t=>G()),type:"file",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):u("",!0),n("div",mt,[n("label",yt,[d(o(e.$t("content"))+" ",1),ft]),p.type=="article"?(a(),l("textarea",{key:0,required:"",ref_key:"textarea",ref:h,class:"h-96 w-full"},`\r
                        `,512)):(a(),l("div",gt,[i(s).content?y((a(),l("textarea",{key:0,required:"","onUpdate:modelValue":r[11]||(r[11]=t=>i(s).content=t),maxlength:"2000",class:"mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512)),[[F,i(s).content]]):u("",!0),i(s).content?(a(),l("span",_t,o(i(s).content.length)+" of 2000 Characters",1)):u("",!0)]))])]),n("div",ht,[i(j)==0?(a(),l("button",bt,o(e.$t("save")),1)):u("",!0),i(j)==1?(a(),l("button",vt,[M(X,{size:"small"})])):u("",!0),M(oe,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:R(()=>[U.value!=""?(a(),l("span",xt,o(U.value),1)):u("",!0)]),_:1})])],32)])])}}};export{St as default};
