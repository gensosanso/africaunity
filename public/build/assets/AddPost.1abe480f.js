import{u as X,r as c,a as Y,o as ee,c as n,d as a,e as t,t as s,h as r,O as v,l as g,g as m,k as te,w as L,P as se,m as u,j as y,K as F,J as x,F as k,x as w,f as M,T as oe,H as ne,b as ae}from"./app.5804264a.js";import{u as le}from"./postServices.f7a82651.js";import{u as ie}from"./continentServices.5fff2b65.js";import{u as re}from"./zoneServices.d0d4583e.js";import{u as de}from"./countryServices.e5be4277.js";import{u as ce}from"./ministryServices.b68c690c.js";const ue={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},pe={class:"w-full space-y-4 py-5 text-center"},me={class:"text-4xl font-bold capitalize text-primary-blue"},ye={key:0},fe={key:1},ge={class:"text-md text-gray-700"},_e={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},he={class:"font-semibold"},be={class:"mt-3 inline-flex w-full justify-center space-x-3 text-xs lg:mt-0 lg:text-sm"},ve={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},xe={class:"text-xl font-semibold"},ke={key:0},we={key:1},$e={class:"text-md font-light text-gray-700"},Ce={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Se={class:"col-span-2"},qe={class:"text-gray-700"},Ue=t("span",{class:"text-red-500"},"*",-1),ze={class:"text-xs font-light text-gray-400"},Ve={class:"col-span-2 lg:col-span-1"},je={class:"text-gray-700",for:"es"},Le=t("span",{class:"text-red-500"},"*",-1),Fe=["value"],Me={key:0},Pe={key:1},Ne={key:2},Oe={key:3},Re={class:"col-span-2 lg:col-span-1"},Be={class:"text-gray-700",for:"pt"},De=t("span",{class:"text-red-500"},"*",-1),Te=["value"],Ee={key:0},Ie={key:1},Ze={key:2},Ae={key:3},Je={key:1,value:"null"},He={class:"col-span-2 lg:col-span-1"},Ke={class:"text-gray-700",for:"es"},Ge=t("span",{class:"text-red-500"},"*",-1),Qe=["value"],We={key:0},Xe={key:1},Ye={key:2},et={key:3},tt={key:1,value:"null"},st={class:"col-span-2 lg:col-span-1"},ot={class:"text-gray-700",for:"pt"},nt=t("span",{class:"text-red-500"},"*",-1),at=["value"],lt={key:0},it={key:1},rt={key:2},dt={key:3},ct={key:0,class:"col-span-2"},ut={class:"text-gray-700",for:"fr"},pt=t("span",{class:"text-red-500"},"*",-1),mt={class:"flex items-center space-x-4 py-4"},yt=["src","alt"],ft={class:"col-span-2"},gt={class:"text-gray-700",for:"pt"},_t=t("span",{class:"text-red-500"},"*",-1),ht={key:1},bt={class:"text-xs font-light text-gray-400"},vt={key:2,class:"text-xs font-light italic"},xt={class:"ml-1 text-primary-blue"},kt={href:"/add/propau"},wt={class:"mt-20"},$t={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},Ct={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},St={key:0,class:"text-xs font-light italic"},Ft={__name:"AddPost",props:{type:{type:String}},setup(p){const d=p,$=ne(),{locale:z}=X();c([]);const P=["article","propau"],f=localStorage.user?JSON.parse(localStorage.user):"",{continents:N,getContinents:O}=ie(),{zones:R,getZones:B}=re(),{countries:D,getCountries:T}=de(),{ministries:E,getMinistries:I}=ce(),_=c(""),C=c(""),V=c(null),S=c([]),h=c([]),q=c(0),l=Y({title:"",type:d.type,user_id:f.id,language:"fr",content:"",image:"",continent_id:"",zone_id:"",country_id:"",ministry_id:""});ee(async()=>{P.includes(d.type)||$.push({name:"home"}),d.type=="article"&&(sceditor.create(_.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),_.value.value==""),q.value++,await O(),await B(),await T(),await I()});const Z=()=>{S.value=R.value.filter(e=>e.continent_id==l.continent_id),l.country_id="",l.zone_id="",h.value=[]},A=()=>{h.value=D.value.filter(e=>e.zone_id==l.zone_id),l.country_id=""},{createPost:J,errors:U,loading:j}=le(),H=async()=>{if(d.type=="article"&&(l.content=_.value.value,q.value==1)){q.value++,C.value="please click again";return}let e=new FormData;e.append("image",l.image),e.append("title",l.title),e.append("type",l.type),e.append("user_id",l.user_id),e.append("language",localStorage.lang),e.append("content",l.content),e.append("continent_id",l.continent_id),e.append("zone_id",l.zone_id),e.append("country_id",l.country_id),e.append("ministry_id",l.ministry_id),await J(e),U.value==""&&(d.type=="article"?$.push({name:"compte",params:{slug:f.slug,id:f.id},query:{redirect:"article"}}):$.push({name:"compte",params:{slug:f.slug,id:f.id},query:{redirect:"propau"}}))},K=()=>{l.image=V.value.files[0]},b=e=>{z.value=e,localStorage.lang=z.value};function G(e){return URL.createObjectURL(e)}function Q(e){return URL.revokeObjectURL(e)}return(e,i)=>{const W=ae("Spin");return n(),a("div",ue,[t("div",pe,[t("h1",me,[d.type=="article"?(n(),a("span",ye,s(e.$t("add")),1)):(n(),a("span",fe,s(e.$tc("add",2)),1)),r(" "+s(d.type),1)]),t("h2",ge,s(e.$t("your"))+" "+s(p.type)+" "+s(e.$t("add-desc-1")),1),t("div",_e,[t("h1",he,s(e.$t("select-lang"))+" :",1),t("div",be,[t("button",{class:v([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[0]||(i[0]=g(o=>b("fr"),["prevent"]))},s(e.$t("fr")),3),t("button",{class:v([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[1]||(i[1]=g(o=>b("en"),["prevent"]))},s(e.$t("en")),3),t("button",{class:v([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[2]||(i[2]=g(o=>b("es"),["prevent"]))},s(e.$t("es")),3),t("button",{class:v([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:i[3]||(i[3]=g(o=>b("pt"),["prevent"]))},s(e.$t("pt")),3)])])]),t("section",ve,[m(U)!=""?(n(),te(se,{key:0},{default:L(()=>[r(s(m(U)),1)]),_:1})):u("",!0),t("h1",xe,[d.type=="article"?(n(),a("span",ke,s(e.$t("add")),1)):(n(),a("span",we,s(e.$tc("add",2)),1)),r(" "+s(p.type),1)]),t("h2",$e,s(e.$t("good-msg-post"))+" ! ",1),t("form",{onSubmit:i[12]||(i[12]=g(o=>H(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",Ce,[t("div",Se,[t("label",qe,[r(s(e.$t("title"))+" ",1),Ue]),y(t("input",{required:"","onUpdate:modelValue":i[4]||(i[4]=o=>l.title=o),maxlength:"50",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[F,l.title]]),t("span",ze,s(l.title.length)+" of 50 Characters",1)]),t("div",Ve,[t("label",je,[r(s(e.$t("continent"))+" ",1),Le]),y(t("select",{required:"","onUpdate:modelValue":i[5]||(i[5]=o=>l.continent_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(k,null,w(m(N),o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",Me,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Pe,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ne,s(o.name_es),1)):(n(),a("span",Oe,s(o.name_pt),1))],8,Fe))),128))],544),[[x,l.continent_id]])]),t("div",Re,[t("label",Be,[r(s(e.$t("zoned")),1),De]),y(t("select",{required:"",onChange:A,"onUpdate:modelValue":i[6]||(i[6]=o=>l.zone_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[S.value.length!=0?(n(!0),a(k,{key:0},w(S.value,o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",Ee,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Ie,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ze,s(o.name_es),1)):(n(),a("span",Ae,s(o.name_pt),1))],8,Te))),128)):(n(),a("option",Je," Select "+s(e.$t("continent")),1))],544),[[x,l.zone_id]])]),t("div",He,[t("label",Ke,[r(s(e.$t("country")),1),Ge]),y(t("select",{required:"","onUpdate:modelValue":i[7]||(i[7]=o=>l.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[h.value.length!=0?(n(!0),a(k,{key:0},w(h.value,o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",We,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Xe,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ye,s(o.name_es),1)):(n(),a("span",et,s(o.name_pt),1))],8,Qe))),128)):(n(),a("option",tt," Select "+s(e.$t("zoned")),1))],512),[[x,l.country_id]])]),t("div",st,[t("label",ot,[r(s(e.$t("ministry")),1),nt]),y(t("select",{required:"","onUpdate:modelValue":i[8]||(i[8]=o=>l.ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(k,null,w(m(E),o=>(n(),a("option",{key:o.id,value:o.id},[e.$i18n.locale=="en"?(n(),a("span",lt,s(o.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",it,s(o.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",rt,s(o.name_es),1)):(n(),a("span",dt,s(o.name_pt),1))],8,at))),128))],512),[[x,l.ministry_id]])]),p.type=="article"?(n(),a("div",ct,[t("label",ut,[r(s(e.$t("thumbnails"))+" ",1),pt]),t("div",mt,[l.image?(n(),a("img",{key:0,src:typeof l.image=="string"?l.image:G(l.image),onLoad:i[9]||(i[9]=o=>typeof l.image=="string"?"":Q(l.image)),class:"h-16 w-16 rounded-full",alt:l.title},null,40,yt)):u("",!0),t("input",{required:"",ref_key:"file",ref:V,onChange:i[10]||(i[10]=o=>K()),accept:"image/*",type:"file",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):u("",!0),t("div",ft,[t("label",gt,[r(s(e.$t("content"))+" ",1),_t]),p.type=="article"?(n(),a("textarea",{key:0,required:"",ref_key:"textarea",ref:_,class:"h-96 w-full"},`\r
                        `,512)):(n(),a("div",ht,[y(t("textarea",{required:"","onUpdate:modelValue":i[11]||(i[11]=o=>l.content=o),maxlength:"2000",class:"mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512),[[F,l.content]]),t("span",bt,s(l.content.length)+" of 2000 Characters",1)])),p.type=="article"?(n(),a("span",vt,[t("span",null,s(e.$t("instead-add-propau")),1),t("span",xt,[t("a",kt,s(e.$tc("add",2))+" PropAU",1)])])):u("",!0)])]),t("div",wt,[m(j)==0?(n(),a("button",$t,s(e.$t("save")),1)):u("",!0),m(j)==1?(n(),a("button",Ct,[M(W,{size:"small"})])):u("",!0),M(oe,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:L(()=>[C.value!=""?(n(),a("span",St,s(C.value),1)):u("",!0)]),_:1})])],32)])])}}};export{Ft as default};
