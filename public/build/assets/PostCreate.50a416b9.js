import{r as d,o as O,a as H,c as n,d as a,e,t as i,g as u,k as I,w as z,h as K,P as G,m as y,l as Q,j as l,K as V,J as g,F as b,x as _,f as S,T as W,H as X,b as Y}from"./app.c7bd1d8d.js";import{u as ee}from"./postServices.8206875f.js";import{u as te}from"./continentServices.1bc29bc2.js";import{u as oe}from"./zoneServices.b758d2ab.js";import{u as re}from"./countryServices.1da3b008.js";import{u as se}from"./ministryServices.b3048325.js";const ne={class:"relative min-h-screen w-full bg-white xl:mt-0 xl:p-4"},ae={class:"z-0 w-full p-4"},ie={class:"flex w-full justify-between bg-white px-8 py-5"},le={class:"text-4xl font-bold capitalize text-primary-blue"},de={class:"mx-auto w-full bg-white p-6"},ue={class:"text-md font-light text-gray-700"},ce={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},pe={class:"col-span-2"},ye=e("label",{class:"dark:text-gray-200 text-gray-700"},"Title",-1),ge={class:"col-span-2"},me=e("label",{class:"dark:text-gray-200 text-gray-700",for:"en"},"Language",-1),fe=e("option",{value:"fr"},"French",-1),be=e("option",{value:"en"},"English",-1),_e=e("option",{value:"es"},"Espanol",-1),xe=e("option",{value:"pt"},"Portugues",-1),ve=[fe,be,_e,xe],he=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Continent",-1),ke=["value"],we=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Zone",-1),Ce=["value"],qe={key:1,value:"null"},ze=e("label",{class:"dark:text-gray-200 text-gray-700",for:"es"},"Country",-1),Ve=["value"],Se={key:1,value:"null"},Fe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Ministry",-1),Me=["value"],Ue={key:0,class:"col-span-2"},Pe=e("label",{class:"dark:text-gray-200 text-gray-700",for:"fr"},"Image",-1),je={class:"col-span-2"},Ee=e("label",{class:"dark:text-gray-200 text-gray-700",for:"pt"},"Content",-1),Ne={key:1},Te={class:"text-xs font-light text-gray-400"},Be={class:"mt-6 flex flex-col items-end justify-end"},De={key:0,type:"submit",class:"rounded bg-primary-blue px-6 py-2 leading-5 text-white focus:outline-none"},Ze={key:1,type:"submit",disabled:"",class:"rounded bg-blue-300 px-6 py-2 leading-5 text-white focus:outline-none"},$e={key:0,class:"text-xs font-light italic"},Ie={__name:"PostCreate",props:{type:{required:!0,type:String}},setup(c){const p=c,x=X(),m=d(""),v=d(""),h=d(0),C=d(null),F=["article","propau"],M=JSON.parse(localStorage.user),{continents:U,getContinents:P}=te(),{zones:j,getZones:E}=oe(),{countries:N,getCountries:T}=re(),{ministries:B,getMinistries:D}=se(),k=d([]),f=d([]);O(async()=>{F.includes(p.type)||x.push({name:"admin.dash"}),p.type=="article"&&(sceditor.create(m.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),m.value.value==""),h.value++,await P(),await E(),await T(),await D()});const t=H({title:"",type:p.type,user_id:M.id,language:"fr",content:"",image:"",continent_id:1,zone_id:1,country_id:1,ministry_id:1}),Z=()=>{k.value=j.value.filter(r=>r.continent_id==t.continent_id),t.country_id="",t.zone_id="",f.value=[]},$=()=>{f.value=N.value.filter(r=>r.zone_id==t.zone_id),t.country_id=""},{createPost:R,errors:w,loading:q}=ee(),A=async()=>{if(p.type=="article"&&(t.content=m.value.value,h.value==1)){h.value++,v.value="please click again";return}let r=new FormData;r.append("image",t.image),r.append("title",t.title),r.append("type",t.type),r.append("user_id",t.user_id),r.append("language",t.language),r.append("content",t.content),r.append("continent_id",t.continent_id),r.append("zone_id",t.zone_id),r.append("country_id",t.country_id),r.append("ministry_id",t.ministry_id),await R(r),w.value==""&&(p.type=="article"?x.push({name:"admin.post.index",params:{type:"article"}}):x.push({name:"admin.post.index",params:{type:"propau"}}))},J=()=>{t.image=C.value.files[0]};return(r,s)=>{const L=Y("Spin");return n(),a("div",ne,[e("div",ae,[e("div",ie,[e("h1",le," Add "+i(c.type),1)]),e("section",de,[u(w)!=""?(n(),I(G,{key:0},{default:z(()=>[K(i(u(w)),1)]),_:1})):y("",!0),e("h2",ue," Add a new "+i(c.type),1),e("form",{onSubmit:s[8]||(s[8]=Q(o=>A(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[e("div",ce,[e("div",pe,[ye,l(e("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=o=>t.title=o),type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[V,t.title]])]),e("div",ge,[me,l(e("select",{required:"","onUpdate:modelValue":s[1]||(s[1]=o=>t.language=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},ve,512),[[g,t.language]])]),e("div",null,[he,l(e("select",{required:"","onUpdate:modelValue":s[2]||(s[2]=o=>t.continent_id=o),onChange:Z,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(b,null,_(u(U),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,ke))),128))],544),[[g,t.continent_id]])]),e("div",null,[we,l(e("select",{required:"","onUpdate:modelValue":s[3]||(s[3]=o=>t.zone_id=o),onChange:$,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[k.value.length!=0?(n(!0),a(b,{key:0},_(k.value,o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,Ce))),128)):(n(),a("option",qe," Requires "+i(r.$t("continent")),1))],544),[[g,t.zone_id]])]),e("div",null,[ze,l(e("select",{required:"","onUpdate:modelValue":s[4]||(s[4]=o=>t.country_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[f.value.length!=0?(n(!0),a(b,{key:0},_(f.value,o=>(n(),a("option",{value:o.id},i(o.name_en),9,Ve))),256)):(n(),a("option",Se," Requires "+i(r.$t("zoned")),1))],512),[[g,t.country_id]])]),e("div",null,[Fe,l(e("select",{required:"","onUpdate:modelValue":s[5]||(s[5]=o=>t.ministry_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(b,null,_(u(B),o=>(n(),a("option",{key:o.id,value:o.id},i(o.name_en),9,Me))),128))],512),[[g,t.ministry_id]])]),c.type=="article"?(n(),a("div",Ue,[Pe,e("input",{required:"",ref_key:"file",ref:C,onChange:s[6]||(s[6]=o=>J()),type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])):y("",!0),e("div",je,[Ee,c.type=="article"?(n(),a("textarea",{key:0,required:"",ref_key:"textarea",ref:m,class:"h-96 w-full"},`\r
                            `,512)):(n(),a("div",Ne,[l(e("textarea",{required:"","onUpdate:modelValue":s[7]||(s[7]=o=>t.content=o),maxlength:"2000",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                                `,512),[[V,t.content]]),e("span",Te,i(t.content.length)+" of 2000 Characters",1)]))])]),e("div",Be,[u(q)==0?(n(),a("button",De," Save ")):y("",!0),u(q)==1?(n(),a("button",Ze,[S(L,{size:"small"})])):y("",!0),S(W,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:z(()=>[v.value!=""?(n(),a("span",$e,i(v.value),1)):y("",!0)]),_:1})])],32)])])])}}};export{Ie as default};
