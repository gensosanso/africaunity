import{r as p,a as R,o as D,c as n,d as l,e,t as a,g as d,k as E,w as h,h as i,m as c,l as F,j as y,K as x,J as M,F as O,x as T,f as v,T as P,H as I,b as k}from"./app.3c71ebbd.js";import{u as J}from"./categoryPersonalPostServices.ed8f2232.js";import{u as z}from"./personalPostsServices.afa1fd42.js";const H={class:"text-center text-2xl font-bold text-gray-500 sm:text-4xl"},K={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},A={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},G={class:"col-span-2"},Q={class:"dark:text-gray-200 text-gray-700"},W=e("span",{class:"text-red-500"},"*",-1),X={class:"text-xs font-light text-gray-400"},Y={class:"col-span-2"},Z={class:"dark:text-gray-200 text-gray-700",for:"es"},ee=e("span",{class:"text-red-500"},"*",-1),te=["value"],se={key:0},ae={key:1},oe={key:2},re={key:3},ne={class:"col-span-2"},le={class:"dark:text-gray-200 text-gray-700"},ie={class:"text-xs font-light text-gray-400"},de={class:"col-span-2"},ce={class:"dark:text-gray-200 text-gray-700",for:"fr"},ue=e("span",{class:"text-red-500"},"*",-1),pe={class:"flex items-center space-x-4 py-4"},me=["src","alt"],ge={class:"col-span-2"},fe={class:"dark:text-gray-200 text-gray-700",for:"pt"},ye=e("span",{class:"text-red-500"},"*",-1),_e={class:"mt-20"},be={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},he={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},xe={key:0,class:"text-xs font-light italic"},Se={__name:"PersonalBlogCreate",emits:["back"],setup(ve,{emit:ke}){const{createPersonalPost:w,errors:m,loading:_}=z(),{categoryPersonalPosts:$,getCategoryPersonalPosts:C}=J(),S=JSON.parse(localStorage.user),U=I(),g=p(0),u=p(null),f=p(""),b=p(null),t=R({title:"",user_id:S.id,content:"",image:"",subtheme:"",category_personal_post_id:""});D(async()=>{sceditor.create(u.value,{format:"xhtml",style:"https://cdn.jsdelivr.net/npm/sceditor@3/minified/themes/content/default.min.css",height:400,toolbarExclude:"indent,outdent,email,date,time,ltr,rtl,print,subscript,superscript,table,code,quote,emoticon",icons:"material"}),u.value.value=="",g.value++,await C()});const V=async()=>{if(t.content=u.value.value,g.value==1){g.value++,f.value="please click again";return}let s=new FormData;s.append("image",t.image),s.append("title",t.title),s.append("subtheme",t.subtheme),s.append("user_id",t.user_id),s.append("content",t.content),s.append("category_personal_post_id",t.category_personal_post_id),await w(s),m.value==""&&U.push({name:"admin.personal-post.index"})},j=()=>{t.image=b.value.files[0]};function L(s){return URL.createObjectURL(s)}function q(s){return URL.revokeObjectURL(s)}return(s,r)=>{const B=k("Error"),N=k("Spin");return n(),l("div",null,[e("h1",H,a(s.$tc("add",1))+" Post ",1),e("section",K,[d(m)!=""?(n(),E(B,{key:0},{default:h(()=>[i(a(d(m)),1)]),_:1})):c("",!0),e("form",{onSubmit:r[5]||(r[5]=F(o=>V(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[e("div",A,[e("div",G,[e("label",Q,[i(a(s.$t("title"))+" ",1),W]),y(e("input",{required:"","onUpdate:modelValue":r[0]||(r[0]=o=>t.title=o),maxlength:"50",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[x,t.title]]),e("span",X,a(t.title.length)+" of 50 Characters",1)]),e("div",Y,[e("label",Z,[i(a(s.$t("theme"))+" ",1),ee]),y(e("select",{required:"","onUpdate:modelValue":r[1]||(r[1]=o=>t.category_personal_post_id=o),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),l(O,null,T(d($),o=>(n(),l("option",{key:o.id,value:o.id},[s.$i18n.locale=="en"?(n(),l("span",se,a(o.name_en),1)):s.$i18n.locale=="fr"?(n(),l("span",ae,a(o.name_fr),1)):s.$i18n.locale=="es"?(n(),l("span",oe,a(o.name_es),1)):(n(),l("span",re,a(o.name_pt),1))],8,te))),128))],512),[[M,t.category_personal_post_id]])]),e("div",ne,[e("label",le,a(s.$t("subtheme")),1),y(e("input",{"onUpdate:modelValue":r[2]||(r[2]=o=>t.subtheme=o),maxlength:"255",type:"text",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[x,t.subtheme]]),e("span",ie,a(t.subtheme.length)+" of 255 Characters",1)]),e("div",de,[e("label",ce,[i(a(s.$t("thumbnails"))+" ",1),ue]),e("div",pe,[t.image?(n(),l("img",{key:0,src:typeof t.image=="string"?t.image:L(t.image),onLoad:r[3]||(r[3]=o=>typeof t.image=="string"?"":q(t.image)),class:"h-16 w-16 rounded-full",alt:t.title},null,40,me)):c("",!0),e("input",{required:"",ref_key:"file",ref:b,onChange:r[4]||(r[4]=o=>j()),accept:"image/*",type:"file",class:"dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:focus:border-blue-300 mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])]),e("div",ge,[e("label",fe,[i(a(s.$t("content"))+" ",1),ye]),e("textarea",{required:"",ref_key:"textarea",ref:u,class:"h-96 w-full"},`\r
                        `,512)])]),e("div",_e,[d(_)==0?(n(),l("button",be,a(s.$t("save")),1)):c("",!0),d(_)==1?(n(),l("button",he,[i(a(s.$t("save"))+"... ",1),v(N,{size:"small"})])):c("",!0),v(P,{"enter-active-class":" transition-all  ","enter-from-class":" opacity-0  -translate-y-10","enter-to-class":"  opacity-1 translate-y-0","leave-active-class":"","leave-from-class":"","leave-to-class":""},{default:h(()=>[f.value!=""?(n(),l("span",xe,a(f.value),1)):c("",!0)]),_:1})])],32)])])}}};export{Se as default};
