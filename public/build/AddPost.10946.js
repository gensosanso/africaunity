import{u as K,r as h,a as G,o as Q,c as n,d as a,e as t,t as o,h as r,O as b,l as g,g as c,k as S,w as W,P as X,m as p,j as m,K as z,J as v,F as k,x,f as Y,H as ee,b as te}from"./app.10946.js";import{u as se}from"./postServices.10946.js";import{u as oe}from"./continentServices.10946.js";import{u as ne}from"./zoneServices.10946.js";import{u as ae}from"./countryServices.10946.js";import{u as ie}from"./ministryServices.10946.js";import{_ as le}from"./RichText.10946.js";const re={class:"mx-auto min-h-screen w-full bg-white py-4 lg:px-20 xl:w-[90%]"},de={class:"w-full space-y-4 py-5 text-center"},ue={class:"text-4xl font-bold capitalize text-primary-blue"},ce={key:0},pe={key:1},me={class:"text-md text-gray-700"},ye={key:0},ge={key:1},fe={class:"flex flex-col items-center justify-center lg:flex-row lg:space-x-3"},_e={class:"font-semibold"},he={class:"mt-3 inline-flex w-full justify-center space-x-3 text-xs lg:mt-0 lg:text-sm"},be={class:"mx-auto w-full rounded-md bg-white p-6 shadow-xl"},ve={class:"text-xl font-semibold"},ke={key:0},xe={key:1},$e={class:"text-md font-light text-gray-700"},we={class:"mt-4 grid grid-cols-1 gap-6 sm:grid-cols-2"},Ce={class:"col-span-2"},Ve={class:"text-gray-700"},Ue=t("span",{class:"text-red-500"},"*",-1),qe={class:"text-xs font-light text-gray-400"},Se={class:"col-span-2 lg:col-span-1"},ze={class:"text-gray-700",for:"es"},je=t("span",{class:"text-red-500"},"*",-1),Le=["value"],Re={key:0},Fe={key:1},Me={key:2},Pe={key:3},Ne={class:"col-span-2 lg:col-span-1"},Oe={class:"text-gray-700",for:"pt"},Be=t("span",{class:"text-red-500"},"*",-1),De=["value"],Ie={key:0},Ze={key:1},Ae={key:2},Ee={key:3},Je={key:1,value:"null"},Te={class:"col-span-2"},He={class:"text-gray-700",for:"es"},Ke=t("span",{class:"text-red-500"},"*",-1),Ge=["value"],Qe={key:0},We={key:1},Xe={key:2},Ye={key:3},et={key:1,value:"null"},tt={class:"col-span-2"},st={class:"text-gray-700",for:"pt"},ot=t("span",{class:"text-red-500"},"*",-1),nt=["value"],at={key:0},it={key:1},lt={key:2},rt={key:3},dt={key:0,class:"col-span-2"},ut={class:"text-gray-700",for:"fr"},ct=t("span",{class:"text-red-500"},"*",-1),pt={class:"flex items-center space-x-4 py-4"},mt=["src","alt"],yt={class:"col-span-2"},gt={class:"text-gray-700",for:"pt"},ft=t("span",{class:"text-red-500"},"*",-1),_t={key:1},ht={class:"text-xs font-light text-gray-400"},bt={key:2,class:"text-xs font-light italic"},vt={class:"ml-1 text-primary-blue"},kt={href:"/add/propau"},xt={class:"mt-20"},$t={key:0,type:"submit",class:"text-md w-full rounded bg-primary-blue px-6 py-4 leading-5 text-white focus:outline-none"},wt={key:1,type:"submit",disabled:"",class:"text-md flex w-full items-center justify-center rounded bg-blue-300 px-6 py-4 leading-5 text-white focus:outline-none"},Lt={__name:"AddPost",props:{type:{type:String}},setup(u){const d=u,$=ee(),{locale:w}=K();h([]);const j=["article","propau"],y=localStorage.user?JSON.parse(localStorage.user):"",{continents:L,getContinents:R}=oe(),{zones:F,getZones:M}=ne(),{countries:P,getCountries:N}=ae(),{ministries:O,getMinistries:B}=ie(),U=h(null),C=h([]),f=h([]),i=G({title:"",type:d.type,user_id:y.id,language:w.value,content:"",image:"",continent_id:"",zone_id:"",country_id:"",ministries:[]});Q(async()=>{j.includes(d.type)||$.push({name:"home"}),await R(),await M(),await N(),await B()});const D=()=>{C.value=F.value.filter(e=>e.continent_id==i.continent_id),i.country_id="",i.zone_id="",f.value=[]},I=()=>{f.value=P.value.filter(e=>e.zone_id==i.zone_id),i.country_id=""},{createPost:Z,errors:V,loading:q}=se(),A=async()=>{let e=new FormData;e.append("image",i.image),e.append("title",i.title),e.append("type",i.type),e.append("user_id",i.user_id),e.append("language",localStorage.lang),e.append("content",i.content),e.append("continent_id",i.continent_id),e.append("zone_id",i.zone_id),e.append("country_id",i.country_id),e.append("ministries",i.ministries),await Z(e),V.value==""&&(d.type=="article"?$.push({name:"compte",params:{slug:y.slug,id:y.id},query:{redirect:"article"}}):$.push({name:"compte",params:{slug:y.slug,id:y.id},query:{redirect:"propau"}}))},E=()=>{i.image=U.value.files[0]},_=e=>{w.value=e,localStorage.lang=w.value};function J(e){return URL.createObjectURL(e)}function T(e){return URL.revokeObjectURL(e)}return(e,l)=>{const H=te("Spin");return n(),a("div",re,[t("div",de,[t("h1",ue,[d.type=="article"?(n(),a("span",ce,o(e.$t("add")),1)):(n(),a("span",pe,o(e.$tc("add",2)),1)),r(" "+o(d.type),1)]),t("h2",me,[r(o(e.$t("your"))+" "+o(u.type)+" ",1),d.type=="article"?(n(),a("span",ye,o(e.$t("add-desc-1")),1)):(n(),a("span",ge,o(e.$tc("add-desc-1",2)),1))]),t("div",fe,[t("h1",_e,o(e.$t("select-lang"))+" :",1),t("div",he,[t("button",{class:b([e.$i18n.locale!="fr"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[0]||(l[0]=g(s=>_("fr"),["prevent"]))},o(e.$t("fr")),3),t("button",{class:b([e.$i18n.locale!="en"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[1]||(l[1]=g(s=>_("en"),["prevent"]))},o(e.$t("en")),3),t("button",{class:b([e.$i18n.locale!="es"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[2]||(l[2]=g(s=>_("es"),["prevent"]))},o(e.$t("es")),3),t("button",{class:b([e.$i18n.locale!="pt"?"rounded-md bg-menu px-3 py-1 text-white":"rounded-md bg-primary-blue px-3 py-1 text-white"]),onClick:l[3]||(l[3]=g(s=>_("pt"),["prevent"]))},o(e.$t("pt")),3)])])]),t("section",be,[c(V)!=""?(n(),S(X,{key:0},{default:W(()=>[r(o(c(V)),1)]),_:1})):p("",!0),t("h1",ve,[d.type=="article"?(n(),a("span",ke,o(e.$t("add")),1)):(n(),a("span",xe,o(e.$tc("add",2)),1)),r(" "+o(u.type),1)]),t("h2",$e,o(e.$t("good-msg-post"))+" ! ",1),t("form",{onSubmit:l[13]||(l[13]=g(s=>A(),["prevent"])),id:"postform",enctype:"multipart/form-data"},[t("div",we,[t("div",Ce,[t("label",Ve,[r(o(e.$t("title"))+" ",1),Ue]),m(t("input",{required:"","onUpdate:modelValue":l[4]||(l[4]=s=>i.title=s),maxlength:"50",type:"text",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[z,i.title]]),t("span",qe,o(i.title.length)+" of 50 Characters",1)]),t("div",Se,[t("label",ze,[r(o(e.$t("continent"))+" ",1),je]),m(t("select",{required:"","onUpdate:modelValue":l[5]||(l[5]=s=>i.continent_id=s),onChange:D,class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(k,null,x(c(L),s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",Re,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Fe,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Me,o(s.name_es),1)):(n(),a("span",Pe,o(s.name_pt),1))],8,Le))),128))],544),[[v,i.continent_id]])]),t("div",Ne,[t("label",Oe,[r(o(e.$t("zoned")),1),Be]),m(t("select",{required:"",onChange:I,"onUpdate:modelValue":l[6]||(l[6]=s=>i.zone_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[C.value.length!=0?(n(!0),a(k,{key:0},x(C.value,s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",Ie,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",Ze,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Ae,o(s.name_es),1)):(n(),a("span",Ee,o(s.name_pt),1))],8,De))),128)):(n(),a("option",Je," Requires "+o(e.$t("continent")),1))],544),[[v,i.zone_id]])]),t("div",Te,[t("label",He,[r(o(e.$t("country")),1),Ke]),m(t("select",{required:"","onUpdate:modelValue":l[7]||(l[7]=s=>i.country_id=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[f.value.length!=0?(n(!0),a(k,{key:0},x(f.value,s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",Qe,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",We,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",Xe,o(s.name_es),1)):(n(),a("span",Ye,o(s.name_pt),1))],8,Ge))),128)):(n(),a("option",et," Requires "+o(e.$t("zoned")),1))],512),[[v,i.country_id]])]),t("div",tt,[t("label",st,[r(o(e.$t("ministry")),1),ot]),m(t("select",{required:"",multiple:"","onUpdate:modelValue":l[8]||(l[8]=s=>i.ministries=s),class:"form-select mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring-primary-blue"},[(n(!0),a(k,null,x(c(O),s=>(n(),a("option",{key:s.id,value:s.id},[e.$i18n.locale=="en"?(n(),a("span",at,o(s.name_en),1)):e.$i18n.locale=="fr"?(n(),a("span",it,o(s.name_fr),1)):e.$i18n.locale=="es"?(n(),a("span",lt,o(s.name_es),1)):(n(),a("span",rt,o(s.name_pt),1))],8,nt))),128))],512),[[v,i.ministries]])]),u.type=="article"?(n(),a("div",dt,[t("label",ut,[r(o(e.$t("thumbnails"))+" ",1),ct]),t("div",pt,[i.image?(n(),a("img",{key:0,src:typeof i.image=="string"?"/storage"+i.image:J(i.image),onLoad:l[9]||(l[9]=s=>typeof i.image=="string"?"":T(i.image)),class:"h-16 w-16 rounded-full",alt:i.title},null,40,mt)):p("",!0),t("input",{required:"",ref_key:"file",ref:U,onChange:l[10]||(l[10]=s=>E()),accept:"image/*",type:"file",class:"mt-2 block w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,544)])])):p("",!0),t("div",yt,[t("label",gt,[r(o(e.$t("content"))+" ",1),ft]),u.type=="article"?(n(),S(le,{key:0,modelValue:i.content,"onUpdate:modelValue":l[11]||(l[11]=s=>i.content=s)},null,8,["modelValue"])):(n(),a("div",_t,[m(t("textarea",{required:"","onUpdate:modelValue":l[12]||(l[12]=s=>i.content=s),maxlength:"1000",class:"mt-2 block h-32 w-full rounded-md border border-gray-200 bg-white px-4 py-2 text-gray-700 focus:border-primary-blue focus:outline-none focus:ring focus:ring-primary-blue focus:ring-opacity-40"},`\r
                            `,512),[[z,i.content]]),t("span",ht,o(i.content.length)+" of 1000 Characters",1)])),u.type=="article"?(n(),a("span",bt,[t("span",null,o(e.$t("instead-add-propau")),1),t("span",vt,[t("a",kt,o(e.$tc("add",2))+" PropAU",1)])])):p("",!0)])]),t("div",xt,[c(q)==0?(n(),a("button",$t,o(e.$t("save")),1)):p("",!0),c(q)==1?(n(),a("button",wt,[Y(H,{size:"small"})])):p("",!0)])],32)])])}}};export{Lt as default};
